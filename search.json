[
  {
    "objectID": "simulating_postseason.html",
    "href": "simulating_postseason.html",
    "title": "College Football Postseason Predictions",
    "section": "",
    "text": "Playoff Simulations\nThe following predictions come from a game prediction model I trained on historical college football games. The inputs into the game prediction model are team level measures of offensive/defensive/special teams efficiency, which I estimate from play by play data. I simulate each game thousands of times in order to estimate the home team’s win probability and expected margin of victory (or defeat).\n\n\n\n\n\n\nAbout the Table\n\n\n\n\n\nTeam Ratings refer to the team’s estimated efficiency on offense and defense in terms of expected points added per play, adjusted for opponent quality.\nWin Probabilities refer to the proportion of simulations in which the team won their matchup in each round.\n\n\n\n\nPlayoffQuarterfinalSemifinal\n\n\n\n\n\n\n\n  \n    \n    \n    \n    \n    \n    \n    \n    \n  \n  \n    \n      2024 College Football Playoff Simulations\n    \n    \n      Results based on 10,000 simulations from team efficiency model\n    \n    \n      logo\n      team\n      \n        team rating\n      \n      \n        win probability\n      \n    \n    \n      offense\n      defense\n      Round 1\n      Quarterfinal\n      Semi-Final\n      Championship\n    \n  \n  \n    \nOhio State\n0.219\n0.245\n0.696\n0.409\n0.279\n0.166\n    \nNotre Dame\n0.215\n0.257\n0.658\n0.388\n0.265\n0.158\n    \nGeorgia\n0.209\n0.142\n✓\n0.454\n0.284\n0.143\n    \nTexas\n0.133\n0.290\n0.759\n0.570\n0.270\n0.143\n    \nOregon\n0.230\n0.155\n✓\n0.458\n0.276\n0.138\n    \nPenn State\n0.219\n0.198\n0.662\n0.478\n0.223\n0.106\n    \nIndiana\n0.192\n0.198\n0.342\n0.158\n0.088\n0.042\n    \nTennessee\n0.092\n0.226\n0.304\n0.133\n0.073\n0.031\n    \nSMU\n0.132\n0.165\n0.338\n0.211\n0.072\n0.027\n    \nArizona State\n0.152\n0.054\n✓\n0.302\n0.068\n0.018\n    \nBoise State\n0.135\n0.047\n✓\n0.311\n0.069\n0.018\n    \nClemson\n0.130\n0.120\n0.241\n0.128\n0.034\n0.010\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\n\n  \n    \n    \n    \n    \n    \n    \n    \n    \n  \n  \n    \n      2024 College Football Playoff Simulations\n    \n    \n      Results based on 10,000 simulations from team efficiency model\n    \n    \n      logo\n      team\n      \n        team rating\n      \n      \n        win probability\n      \n    \n    \n      offense\n      defense\n      Round 1\n      Quarterfinal\n      Semi-Final\n      Championship\n    \n  \n  \n    \nOhio State\n0.253\n0.248\n✓\n0.642\n0.439\n0.267\n    \nNotre Dame\n0.220\n0.257\n✓\n0.599\n0.368\n0.198\n    \nPenn State\n0.208\n0.232\n✓\n0.766\n0.367\n0.167\n    \nTexas\n0.150\n0.270\n✓\n0.746\n0.310\n0.155\n    \nOregon\n0.234\n0.157\n✓\n0.358\n0.207\n0.099\n    \nGeorgia\n0.204\n0.144\n✓\n0.401\n0.219\n0.095\n    \nBoise State\n0.135\n0.045\n✓\n0.234\n0.047\n0.010\n    \nArizona State\n0.151\n0.052\n✓\n0.254\n0.043\n0.009\n  \n  \n  \n\n\n\n\n\n\n\n\n\n\n\n  \n    \n    \n    \n    \n    \n    \n    \n    \n  \n  \n    \n      2024 College Football Playoff Simulations\n    \n    \n      Results based on 10,000 simulations from team efficiency model\n    \n    \n      logo\n      team\n      \n        team rating\n      \n      \n        win probability\n      \n    \n    \n      offense\n      defense\n      Round 1\n      Quarterfinal\n      Semi-Final\n      Championship\n    \n  \n  \n    \nOhio State\n0.272\n0.261\n✓\n✓\n0.666\n0.407\n    \nNotre Dame\n0.186\n0.264\n✓\n✓\n0.546\n0.254\n    \nPenn State\n0.203\n0.236\n✓\n✓\n0.454\n0.184\n    \nTexas\n0.155\n0.257\n✓\n✓\n0.334\n0.154\n  \n  \n  \n\n\n\n\n\n\n\n\n\nGame Predictions\n\n\n\n\n\n\nAbout the Table\n\n\n\n\n\nQuality indicates the quality of the teams involved in the game. This is the (harmonic) mean of the two team’s power ratings and is scaled to range from 0 to 100, with 100 indicating a game between highly rated opponents.\nInterest indicates how interesting a game is expected to be based on the quality of the teams and how competitive the game is expected to be. I assign every game a competitive rating using a quadratic formula applied to Pr(HomeWin), which I use along with Quality in a weighted average to produce the Interest score. This ranges from 0 to 100, where 100 indicates a very competitive game between two highly rated opponents.\nPr(HomeWin) is the percentage of times that the home team won the game across every simulation.\nPrediction is the average margin of victory for the winning team across all simulations."
  },
  {
    "objectID": "estimating_efficiency.html",
    "href": "estimating_efficiency.html",
    "title": "CFB Team Efficiency",
    "section": "",
    "text": "I use my model of expected points for college football plays to estimate and measure a team’s overall performance on offense, defense, and special teams. I develop opponent-adjusted measures of team performance by fitting models to partial out the effect of individual teams on expected/predicted points.\n\n\nRecall that an expected points model aims to measure the value of an individual play by asking how it affected a team’s ability to score points. For an offense this amounts to getting first downs and moving the ball down the field; for a defense it means limiting the other team’s ability to sustain drives and score.\nEfficiency refers to the idea that good teams, on average, are net positive on the outcomes of plays - they are typically able to move the ball on offense and stop their opponent’s drives on defense.\nTangibly, we can measure a team’s efficiency by summarizing their net predicted points across all of their plays. For example, the following table shows the the top 5 teams by season in terms of raw overall efficiency for all completed seasons from 2007 to present.\n\n\nShow the code\nraw_efficiency_overall |&gt;\n  filter_to_fbs() |&gt;\n  filter(metric == 'ppa') |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  group_by(method, season, metric, type) |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\")) |&gt;\n  group_by(season, method, metric)  |&gt;\n  slice_max(estimate_overall, n =5)  |&gt;\n  efficiency_tbl(with_estimates = T,\n                 with_ranks = T)\n\n\n\n\n\n  \n    \n      team\n      \n        efficiency\n      \n      \n        rank\n      \n    \n    \n      overall\n      offense\n      defense\n      overall\n      offense\n      defense\n    \n  \n  \n    \n      2007 - raw - ppa\n    \n    Kansas\n0.305\n0.177\n0.128\n1\n3\n13\n    Boise State\n0.293\n0.122\n0.171\n2\n10\n5\n    West Virginia\n0.289\n0.153\n0.136\n3\n6\n11\n    LSU\n0.269\n0.118\n0.152\n4\n11\n9\n    Ohio State\n0.264\n0.092\n0.172\n5\n20\n4\n    \n      2008 - raw - ppa\n    \n    Florida\n0.439\n0.267\n0.171\n1\n2\n5\n    USC\n0.362\n0.169\n0.192\n2\n11\n2\n    Boise State\n0.347\n0.161\n0.186\n3\n13\n3\n    Penn State\n0.346\n0.221\n0.126\n4\n7\n12\n    TCU\n0.334\n0.086\n0.248\n5\n25\n1\n    \n      2009 - raw - ppa\n    \n    Florida\n0.356\n0.189\n0.168\n1\n4\n10\n    Alabama\n0.326\n0.083\n0.243\n2\n23\n2\n    TCU\n0.320\n0.072\n0.248\n3\n28\n1\n    Boise State\n0.315\n0.143\n0.172\n4\n8\n9\n    Texas\n0.301\n0.062\n0.239\n5\n35\n3\n    \n      2010 - raw - ppa\n    \n    Boise State\n0.474\n0.251\n0.223\n1\n4\n1\n    TCU\n0.439\n0.249\n0.190\n2\n5\n3\n    Ohio State\n0.350\n0.139\n0.211\n3\n15\n2\n    Oregon\n0.335\n0.208\n0.127\n4\n8\n5\n    Alabama\n0.313\n0.208\n0.105\n5\n7\n12\n    \n      2011 - raw - ppa\n    \n    Alabama\n0.461\n0.142\n0.319\n1\n18\n1\n    Wisconsin\n0.400\n0.310\n0.089\n2\n1\n21\n    LSU\n0.344\n0.152\n0.192\n3\n14\n2\n    Houston\n0.309\n0.235\n0.074\n4\n4\n26\n    Boise State\n0.306\n0.221\n0.085\n5\n6\n23\n    \n      2012 - raw - ppa\n    \n    Alabama\n0.440\n0.260\n0.180\n1\n2\n1\n    Florida State\n0.352\n0.187\n0.164\n2\n6\n5\n    Oregon\n0.290\n0.171\n0.119\n3\n12\n11\n    Texas A&M\n0.245\n0.241\n0.004\n4\n3\n52\n    Georgia\n0.228\n0.159\n0.069\n5\n15\n26\n    \n      2013 - raw - ppa\n    \n    Florida State\n0.505\n0.324\n0.181\n1\n1\n1\n    Alabama\n0.392\n0.256\n0.136\n2\n4\n5\n    Louisville\n0.371\n0.230\n0.141\n3\n7\n4\n    Baylor\n0.333\n0.230\n0.103\n4\n8\n10\n    Oregon\n0.294\n0.207\n0.087\n5\n10\n12\n    \n      2014 - raw - ppa\n    \n    TCU\n0.319\n0.145\n0.174\n1\n23\n3\n    Georgia\n0.306\n0.242\n0.064\n2\n4\n23\n    Ohio State\n0.300\n0.239\n0.061\n3\n5\n25\n    Marshall\n0.292\n0.228\n0.063\n4\n8\n24\n    Baylor\n0.272\n0.231\n0.040\n5\n7\n36\n    \n      2015 - raw - ppa\n    \n    Baylor\n0.277\n0.272\n0.005\n1\n1\n47\n    Ohio State\n0.277\n0.159\n0.118\n2\n21\n7\n    Alabama\n0.276\n0.077\n0.198\n3\n50\n1\n    Oklahoma\n0.270\n0.202\n0.068\n4\n10\n22\n    Boise State\n0.253\n0.125\n0.128\n5\n32\n5\n    \n      2016 - raw - ppa\n    \n    Michigan\n0.355\n0.158\n0.197\n1\n21\n2\n    Alabama\n0.354\n0.120\n0.234\n2\n39\n1\n    Washington\n0.330\n0.235\n0.094\n3\n7\n10\n    Ohio State\n0.310\n0.150\n0.160\n4\n28\n3\n    Western Kentucky\n0.288\n0.273\n0.015\n5\n5\n32\n    \n      2017 - raw - ppa\n    \n    Alabama\n0.357\n0.211\n0.146\n1\n10\n3\n    Ohio State\n0.307\n0.216\n0.091\n2\n9\n12\n    Wisconsin\n0.292\n0.111\n0.181\n3\n36\n1\n    Washington\n0.291\n0.173\n0.119\n4\n16\n8\n    Georgia\n0.283\n0.203\n0.080\n5\n11\n17\n    \n      2018 - raw - ppa\n    \n    Clemson\n0.416\n0.259\n0.157\n1\n5\n2\n    Alabama\n0.396\n0.318\n0.078\n2\n2\n16\n    Utah State\n0.331\n0.191\n0.140\n3\n14\n5\n    Appalachian State\n0.316\n0.164\n0.151\n4\n21\n3\n    Georgia\n0.294\n0.258\n0.036\n5\n6\n30\n    \n      2019 - raw - ppa\n    \n    Ohio State\n0.465\n0.314\n0.151\n1\n4\n1\n    Alabama\n0.425\n0.324\n0.101\n2\n2\n7\n    Clemson\n0.406\n0.284\n0.122\n3\n5\n3\n    LSU\n0.376\n0.362\n0.014\n4\n1\n32\n    Georgia\n0.289\n0.164\n0.125\n5\n23\n2\n    \n      2020 - raw - ppa\n    \n    BYU\n0.429\n0.384\n0.045\n1\n2\n16\n    Alabama\n0.423\n0.394\n0.029\n2\n1\n28\n    Buffalo\n0.349\n0.304\n0.045\n3\n5\n17\n    Clemson\n0.325\n0.202\n0.123\n4\n15\n4\n    Cincinnati\n0.282\n0.125\n0.157\n5\n39\n2\n    \n      2021 - raw - ppa\n    \n    Georgia\n0.424\n0.241\n0.183\n1\n5\n1\n    Ohio State\n0.324\n0.359\n−0.035\n2\n1\n53\n    Michigan\n0.265\n0.217\n0.048\n3\n8\n12\n    Alabama\n0.257\n0.232\n0.026\n4\n7\n18\n    Cincinnati\n0.243\n0.149\n0.095\n5\n27\n5\n    \n      2022 - raw - ppa\n    \n    Georgia\n0.391\n0.299\n0.091\n1\n2\n6\n    Ohio State\n0.338\n0.283\n0.055\n2\n5\n15\n    Michigan\n0.333\n0.233\n0.099\n3\n9\n5\n    Alabama\n0.311\n0.239\n0.072\n4\n8\n8\n    Tennessee\n0.289\n0.291\n−0.002\n5\n3\n42\n    \n      2023 - raw - ppa\n    \n    Oregon\n0.409\n0.403\n0.006\n1\n1\n38\n    Michigan\n0.408\n0.246\n0.162\n2\n5\n1\n    Notre Dame\n0.369\n0.221\n0.148\n3\n7\n3\n    Georgia\n0.353\n0.333\n0.020\n4\n3\n30\n    Penn State\n0.319\n0.168\n0.151\n5\n22\n2\n  \n  \n  \n\n\n\n\nBased purely on their on field play, this measure highlights a lot of the teams we would expect (2008 Florida, Alabama, 2013 Florida State, 2019 Ohio State/LSU, 2021 Georgia), but it also rates certain teams very highly that we wouldn’t necessarily expect to see (2012 Northern Illinois, 2015/2018 Appalachian State Nevada, 2020 Buffalo,)\nWhy is that happening? The issue is that these estimates are simply the average net points per play for each team over the course of a season. They don’t take into account the relative strength of the opposition faced - a 10 yard pass against UMass is considered the same as a 10 yard pass against Ohio State. An offense that plays a weaker schedule will generally perform better than one that plays against top teams, which will lead to a higher evaluation in terms of raw efficiency.\nAs an example, this means that in 2018, from a raw efficiency perspective, Appalachian State finished the regular season rated higher than Oklahoma. This is mainly because Appalachian State’s defense was rated so highly; Oklahoma had the highest rated (raw) offense but their defense was rated so poorly that it pulled their overall score down.\n\n\nShow the code\nexample_raw = \n  raw_efficiency_overall |&gt;\n  filter(metric == 'ppa') |&gt;\n  filter(season == 2018) |&gt;\n  filter_to_fbs() |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  filter(team %in% c(\"Appalachian State\", \"Oklahoma\")) |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\"))\n\nexample_raw |&gt;\n  group_by(metric) |&gt;\n  efficiency_tbl(with_ranks = T, with_estimates = T)\n\n\n\n\n\n  \n    \n      season\n      team\n      method\n      \n        efficiency\n      \n      \n        rank\n      \n    \n    \n      overall\n      offense\n      defense\n      overall\n      offense\n      defense\n    \n  \n  \n    \n      ppa\n    \n    2018\nAppalachian State\nraw\n0.316\n0.164\n0.151\n4\n21\n3\n    2018\nOklahoma\nraw\n0.246\n0.429\n−0.183\n10\n1\n117\n  \n  \n  \n\n\n\n\nNow, compare the schedules of each of these two teams based on their opponents during the regular season, using the raw overall efficiency as the metric of strength.\n\n\n\n\n\n\n\n  \n    \n      \n      team\n      opponent\n      overall\n    \n  \n  \n    \n      2015 - raw - ppa\n    \n    \nOklahoma\nAkron\n0.020\n    \nOklahoma\nClemson\n0.247\n    \nOklahoma\nTennessee\n0.161\n    \nOklahoma\nTulsa\n−0.053\n    \nOklahoma\nWest Virginia\n0.123\n    \nOklahoma\nTexas\n−0.019\n    \nOklahoma\nKansas State\n−0.092\n    \nOklahoma\nTexas Tech\n0.007\n    \nOklahoma\nKansas\n−0.409\n    \nOklahoma\nIowa State\n−0.112\n    \nOklahoma\nBaylor\n0.277\n    \nOklahoma\nTCU\n0.144\n    \nOklahoma\nOklahoma State\n0.138\n    total\n—\n—\n0.432\n  \n  \n  \n\n\n\n\n\n\n\n  \n    \n      \n      team\n      opponent\n      overall\n    \n  \n  \n    \n      2015 - raw - ppa\n    \n    \nAppalachian State\nOhio\n0.026\n    \nAppalachian State\nClemson\n0.247\n    \nAppalachian State\nOld Dominion\n−0.153\n    \nAppalachian State\nWyoming\n−0.205\n    \nAppalachian State\nGeorgia State\n−0.006\n    \nAppalachian State\nLouisiana Monroe\n−0.217\n    \nAppalachian State\nGeorgia Southern\n0.161\n    \nAppalachian State\nTroy\n−0.024\n    \nAppalachian State\nArkansas State\n0.122\n    \nAppalachian State\nIdaho\n−0.171\n    \nAppalachian State\nLouisiana\n−0.064\n    \nAppalachian State\nSouth Alabama\n−0.155\n    total\n—\n—\n-0.439\n  \n  \n  \n\n\n\n\n\n\nOklahoma didn’t play the toughest schedule in college football, but it was considerably harder than Appalachian State.\nIf we adjust for the strength of opponents, we can see that Appalachian State’s defense is still pretty highly rated, but their offense is heavily penalized due to opponent quality and their overall rating falls. Oklahoma, meanwhile, gets a slight improvement to their defense (they were still very poor overall that season) which boosts their overall rating.\n\n\nShow the code\nexample_adjusted = \n  adjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special') |&gt;\n  select(-play_situation) |&gt;\n  filter(season == 2018) |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  filter(team %in% c(\"Oklahoma\", \"Appalachian State\")) |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\"))\n\nexample_adjusted |&gt;\n  mutate(method = 'adjusted') |&gt;\n  bind_rows(\n    example_raw\n  ) |&gt;\n  arrange(team) |&gt;\n  group_by(metric) |&gt;\n  select(season, team, method, everything()) |&gt;\n  efficiency_tbl(with_ranks = T, with_estimates = T)\n\n\n\n\n\n  \n    \n      season\n      team\n      method\n      \n        efficiency\n      \n      \n        rank\n      \n    \n    \n      overall\n      offense\n      defense\n      overall\n      offense\n      defense\n    \n  \n  \n    \n      ppa\n    \n    2018\nAppalachian State\nadjusted\n0.221\n0.016\n0.205\n20\n60\n9\n    2018\nAppalachian State\nraw\n0.316\n0.164\n0.151\n4\n21\n3\n    2018\nOklahoma\nadjusted\n0.357\n0.429\n−0.072\n5\n1\n103\n    2018\nOklahoma\nraw\n0.246\n0.429\n−0.183\n10\n1\n117\n  \n  \n  \n\n\n\n\n\n\n\nHow do we adjust a team’s offensive/defensive efficiency rating based on their opponents?\nI use a ridge regression to partial out the effect of all offenses on all defenses on predicted points oer play. That is, I regress the net predicted points per play on a dummy variable for every offense, defense, as well as an indicator for home field advantage:\n\\[PPA = Offense_{i} + Defense_{j} + Home\\]\nThe coefficient for each offense and defense represent that particular school’s average effect on predicted points per play conditional on all other teams. Good offenses will have positive coefficients (how much more the team scored on a given play than average) while good defenses will have negative coefficients (because they prevented other teams from scoring). Flipping the sign for defense (so that positive is considered good) produces each team’s offensive/defensive net points per play conditional on their opponents.\nI fit regressions at the season level for all teams to examine each team’s offensive/defensive efficiency over the course of an entire season. The coefficients from these regressions can then used to examine how team’s perform on offensive/defense in terms of net points per play.\nFor example, the following visualization places all teams based on their offensive and defensive strengths in the 2023 season. The best teams are those in the upper right quadrant that have strong offenses and defenses. The worst teams are those in the bottom left quadrant with poor offenses and defenses.\n\n\nShow the code\nplot_teams_by_season = function(data, lim = 0.4) {\n  \n  data |&gt;\n    pivot_wider(names_from = c(\"type\"),\n                values_from = c(\"estimate\")) |&gt;\n    ggplot(aes(x=offense,\n               y=defense,\n               label = team,\n               color = team))+\n    geom_label(size = 2, alpha = 0.8) +\n    scale_color_cfb()+\n    facet_wrap(season ~.)+\n    geom_hline(yintercept = 0, linetype = 'dotted')+\n    geom_vline(xintercept = 0, linetype = 'dotted')+\n    coord_cartesian(xlim = c(-lim, lim),\n                    ylim = c(-lim, lim))+\n    labs(title = \"Offensive and Defensive Efficiency by Season\",\n         subtitle = stringr::str_wrap(\"Opponent adjusted team offensive and defensive efficiency ratings based on net predicted points per play.\", 120))+\n    xlab(\"Offensive Net Points per Play\")+\n    ylab(\"Defensive Net Points per Play\")\n  \n}\n\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special' ) |&gt;\n  filter(season == 2023) |&gt;\n  plot_teams_by_season()\n\n\n\n\n\n\n\n\n\nThe same information, but in a table.\n\n\nShow the code\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special' ) |&gt;\n  select(-play_situation) |&gt;\n  filter(season == 2023) |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\")) |&gt;\n  arrange(desc(estimate_overall)) |&gt;\n  select(-metric) |&gt;\n  efficiency_tbl(with_ranks = T, with_estimates = T) |&gt;\n  gt::opt_interactive(page_size_default = 25)"
  },
  {
    "objectID": "estimating_efficiency.html#net-points-per-play",
    "href": "estimating_efficiency.html#net-points-per-play",
    "title": "CFB Team Efficiency",
    "section": "",
    "text": "Recall that an expected points model aims to measure the value of an individual play by asking how it affected a team’s ability to score points. For an offense this amounts to getting first downs and moving the ball down the field; for a defense it means limiting the other team’s ability to sustain drives and score.\nEfficiency refers to the idea that good teams, on average, are net positive on the outcomes of plays - they are typically able to move the ball on offense and stop their opponent’s drives on defense.\nTangibly, we can measure a team’s efficiency by summarizing their net predicted points across all of their plays. For example, the following table shows the the top 5 teams by season in terms of raw overall efficiency for all completed seasons from 2007 to present.\n\n\nShow the code\nraw_efficiency_overall |&gt;\n  filter_to_fbs() |&gt;\n  filter(metric == 'ppa') |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  group_by(method, season, metric, type) |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\")) |&gt;\n  group_by(season, method, metric)  |&gt;\n  slice_max(estimate_overall, n =5)  |&gt;\n  efficiency_tbl(with_estimates = T,\n                 with_ranks = T)\n\n\n\n\n\n  \n    \n      team\n      \n        efficiency\n      \n      \n        rank\n      \n    \n    \n      overall\n      offense\n      defense\n      overall\n      offense\n      defense\n    \n  \n  \n    \n      2007 - raw - ppa\n    \n    Kansas\n0.305\n0.177\n0.128\n1\n3\n13\n    Boise State\n0.293\n0.122\n0.171\n2\n10\n5\n    West Virginia\n0.289\n0.153\n0.136\n3\n6\n11\n    LSU\n0.269\n0.118\n0.152\n4\n11\n9\n    Ohio State\n0.264\n0.092\n0.172\n5\n20\n4\n    \n      2008 - raw - ppa\n    \n    Florida\n0.439\n0.267\n0.171\n1\n2\n5\n    USC\n0.362\n0.169\n0.192\n2\n11\n2\n    Boise State\n0.347\n0.161\n0.186\n3\n13\n3\n    Penn State\n0.346\n0.221\n0.126\n4\n7\n12\n    TCU\n0.334\n0.086\n0.248\n5\n25\n1\n    \n      2009 - raw - ppa\n    \n    Florida\n0.356\n0.189\n0.168\n1\n4\n10\n    Alabama\n0.326\n0.083\n0.243\n2\n23\n2\n    TCU\n0.320\n0.072\n0.248\n3\n28\n1\n    Boise State\n0.315\n0.143\n0.172\n4\n8\n9\n    Texas\n0.301\n0.062\n0.239\n5\n35\n3\n    \n      2010 - raw - ppa\n    \n    Boise State\n0.474\n0.251\n0.223\n1\n4\n1\n    TCU\n0.439\n0.249\n0.190\n2\n5\n3\n    Ohio State\n0.350\n0.139\n0.211\n3\n15\n2\n    Oregon\n0.335\n0.208\n0.127\n4\n8\n5\n    Alabama\n0.313\n0.208\n0.105\n5\n7\n12\n    \n      2011 - raw - ppa\n    \n    Alabama\n0.461\n0.142\n0.319\n1\n18\n1\n    Wisconsin\n0.400\n0.310\n0.089\n2\n1\n21\n    LSU\n0.344\n0.152\n0.192\n3\n14\n2\n    Houston\n0.309\n0.235\n0.074\n4\n4\n26\n    Boise State\n0.306\n0.221\n0.085\n5\n6\n23\n    \n      2012 - raw - ppa\n    \n    Alabama\n0.440\n0.260\n0.180\n1\n2\n1\n    Florida State\n0.352\n0.187\n0.164\n2\n6\n5\n    Oregon\n0.290\n0.171\n0.119\n3\n12\n11\n    Texas A&M\n0.245\n0.241\n0.004\n4\n3\n52\n    Georgia\n0.228\n0.159\n0.069\n5\n15\n26\n    \n      2013 - raw - ppa\n    \n    Florida State\n0.505\n0.324\n0.181\n1\n1\n1\n    Alabama\n0.392\n0.256\n0.136\n2\n4\n5\n    Louisville\n0.371\n0.230\n0.141\n3\n7\n4\n    Baylor\n0.333\n0.230\n0.103\n4\n8\n10\n    Oregon\n0.294\n0.207\n0.087\n5\n10\n12\n    \n      2014 - raw - ppa\n    \n    TCU\n0.319\n0.145\n0.174\n1\n23\n3\n    Georgia\n0.306\n0.242\n0.064\n2\n4\n23\n    Ohio State\n0.300\n0.239\n0.061\n3\n5\n25\n    Marshall\n0.292\n0.228\n0.063\n4\n8\n24\n    Baylor\n0.272\n0.231\n0.040\n5\n7\n36\n    \n      2015 - raw - ppa\n    \n    Baylor\n0.277\n0.272\n0.005\n1\n1\n47\n    Ohio State\n0.277\n0.159\n0.118\n2\n21\n7\n    Alabama\n0.276\n0.077\n0.198\n3\n50\n1\n    Oklahoma\n0.270\n0.202\n0.068\n4\n10\n22\n    Boise State\n0.253\n0.125\n0.128\n5\n32\n5\n    \n      2016 - raw - ppa\n    \n    Michigan\n0.355\n0.158\n0.197\n1\n21\n2\n    Alabama\n0.354\n0.120\n0.234\n2\n39\n1\n    Washington\n0.330\n0.235\n0.094\n3\n7\n10\n    Ohio State\n0.310\n0.150\n0.160\n4\n28\n3\n    Western Kentucky\n0.288\n0.273\n0.015\n5\n5\n32\n    \n      2017 - raw - ppa\n    \n    Alabama\n0.357\n0.211\n0.146\n1\n10\n3\n    Ohio State\n0.307\n0.216\n0.091\n2\n9\n12\n    Wisconsin\n0.292\n0.111\n0.181\n3\n36\n1\n    Washington\n0.291\n0.173\n0.119\n4\n16\n8\n    Georgia\n0.283\n0.203\n0.080\n5\n11\n17\n    \n      2018 - raw - ppa\n    \n    Clemson\n0.416\n0.259\n0.157\n1\n5\n2\n    Alabama\n0.396\n0.318\n0.078\n2\n2\n16\n    Utah State\n0.331\n0.191\n0.140\n3\n14\n5\n    Appalachian State\n0.316\n0.164\n0.151\n4\n21\n3\n    Georgia\n0.294\n0.258\n0.036\n5\n6\n30\n    \n      2019 - raw - ppa\n    \n    Ohio State\n0.465\n0.314\n0.151\n1\n4\n1\n    Alabama\n0.425\n0.324\n0.101\n2\n2\n7\n    Clemson\n0.406\n0.284\n0.122\n3\n5\n3\n    LSU\n0.376\n0.362\n0.014\n4\n1\n32\n    Georgia\n0.289\n0.164\n0.125\n5\n23\n2\n    \n      2020 - raw - ppa\n    \n    BYU\n0.429\n0.384\n0.045\n1\n2\n16\n    Alabama\n0.423\n0.394\n0.029\n2\n1\n28\n    Buffalo\n0.349\n0.304\n0.045\n3\n5\n17\n    Clemson\n0.325\n0.202\n0.123\n4\n15\n4\n    Cincinnati\n0.282\n0.125\n0.157\n5\n39\n2\n    \n      2021 - raw - ppa\n    \n    Georgia\n0.424\n0.241\n0.183\n1\n5\n1\n    Ohio State\n0.324\n0.359\n−0.035\n2\n1\n53\n    Michigan\n0.265\n0.217\n0.048\n3\n8\n12\n    Alabama\n0.257\n0.232\n0.026\n4\n7\n18\n    Cincinnati\n0.243\n0.149\n0.095\n5\n27\n5\n    \n      2022 - raw - ppa\n    \n    Georgia\n0.391\n0.299\n0.091\n1\n2\n6\n    Ohio State\n0.338\n0.283\n0.055\n2\n5\n15\n    Michigan\n0.333\n0.233\n0.099\n3\n9\n5\n    Alabama\n0.311\n0.239\n0.072\n4\n8\n8\n    Tennessee\n0.289\n0.291\n−0.002\n5\n3\n42\n    \n      2023 - raw - ppa\n    \n    Oregon\n0.409\n0.403\n0.006\n1\n1\n38\n    Michigan\n0.408\n0.246\n0.162\n2\n5\n1\n    Notre Dame\n0.369\n0.221\n0.148\n3\n7\n3\n    Georgia\n0.353\n0.333\n0.020\n4\n3\n30\n    Penn State\n0.319\n0.168\n0.151\n5\n22\n2\n  \n  \n  \n\n\n\n\nBased purely on their on field play, this measure highlights a lot of the teams we would expect (2008 Florida, Alabama, 2013 Florida State, 2019 Ohio State/LSU, 2021 Georgia), but it also rates certain teams very highly that we wouldn’t necessarily expect to see (2012 Northern Illinois, 2015/2018 Appalachian State Nevada, 2020 Buffalo,)\nWhy is that happening? The issue is that these estimates are simply the average net points per play for each team over the course of a season. They don’t take into account the relative strength of the opposition faced - a 10 yard pass against UMass is considered the same as a 10 yard pass against Ohio State. An offense that plays a weaker schedule will generally perform better than one that plays against top teams, which will lead to a higher evaluation in terms of raw efficiency.\nAs an example, this means that in 2018, from a raw efficiency perspective, Appalachian State finished the regular season rated higher than Oklahoma. This is mainly because Appalachian State’s defense was rated so highly; Oklahoma had the highest rated (raw) offense but their defense was rated so poorly that it pulled their overall score down.\n\n\nShow the code\nexample_raw = \n  raw_efficiency_overall |&gt;\n  filter(metric == 'ppa') |&gt;\n  filter(season == 2018) |&gt;\n  filter_to_fbs() |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  filter(team %in% c(\"Appalachian State\", \"Oklahoma\")) |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\"))\n\nexample_raw |&gt;\n  group_by(metric) |&gt;\n  efficiency_tbl(with_ranks = T, with_estimates = T)\n\n\n\n\n\n  \n    \n      season\n      team\n      method\n      \n        efficiency\n      \n      \n        rank\n      \n    \n    \n      overall\n      offense\n      defense\n      overall\n      offense\n      defense\n    \n  \n  \n    \n      ppa\n    \n    2018\nAppalachian State\nraw\n0.316\n0.164\n0.151\n4\n21\n3\n    2018\nOklahoma\nraw\n0.246\n0.429\n−0.183\n10\n1\n117\n  \n  \n  \n\n\n\n\nNow, compare the schedules of each of these two teams based on their opponents during the regular season, using the raw overall efficiency as the metric of strength.\n\n\n\n\n\n\n\n  \n    \n      \n      team\n      opponent\n      overall\n    \n  \n  \n    \n      2015 - raw - ppa\n    \n    \nOklahoma\nAkron\n0.020\n    \nOklahoma\nClemson\n0.247\n    \nOklahoma\nTennessee\n0.161\n    \nOklahoma\nTulsa\n−0.053\n    \nOklahoma\nWest Virginia\n0.123\n    \nOklahoma\nTexas\n−0.019\n    \nOklahoma\nKansas State\n−0.092\n    \nOklahoma\nTexas Tech\n0.007\n    \nOklahoma\nKansas\n−0.409\n    \nOklahoma\nIowa State\n−0.112\n    \nOklahoma\nBaylor\n0.277\n    \nOklahoma\nTCU\n0.144\n    \nOklahoma\nOklahoma State\n0.138\n    total\n—\n—\n0.432\n  \n  \n  \n\n\n\n\n\n\n\n  \n    \n      \n      team\n      opponent\n      overall\n    \n  \n  \n    \n      2015 - raw - ppa\n    \n    \nAppalachian State\nOhio\n0.026\n    \nAppalachian State\nClemson\n0.247\n    \nAppalachian State\nOld Dominion\n−0.153\n    \nAppalachian State\nWyoming\n−0.205\n    \nAppalachian State\nGeorgia State\n−0.006\n    \nAppalachian State\nLouisiana Monroe\n−0.217\n    \nAppalachian State\nGeorgia Southern\n0.161\n    \nAppalachian State\nTroy\n−0.024\n    \nAppalachian State\nArkansas State\n0.122\n    \nAppalachian State\nIdaho\n−0.171\n    \nAppalachian State\nLouisiana\n−0.064\n    \nAppalachian State\nSouth Alabama\n−0.155\n    total\n—\n—\n-0.439\n  \n  \n  \n\n\n\n\n\n\nOklahoma didn’t play the toughest schedule in college football, but it was considerably harder than Appalachian State.\nIf we adjust for the strength of opponents, we can see that Appalachian State’s defense is still pretty highly rated, but their offense is heavily penalized due to opponent quality and their overall rating falls. Oklahoma, meanwhile, gets a slight improvement to their defense (they were still very poor overall that season) which boosts their overall rating.\n\n\nShow the code\nexample_adjusted = \n  adjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special') |&gt;\n  select(-play_situation) |&gt;\n  filter(season == 2018) |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  filter(team %in% c(\"Oklahoma\", \"Appalachian State\")) |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\"))\n\nexample_adjusted |&gt;\n  mutate(method = 'adjusted') |&gt;\n  bind_rows(\n    example_raw\n  ) |&gt;\n  arrange(team) |&gt;\n  group_by(metric) |&gt;\n  select(season, team, method, everything()) |&gt;\n  efficiency_tbl(with_ranks = T, with_estimates = T)\n\n\n\n\n\n  \n    \n      season\n      team\n      method\n      \n        efficiency\n      \n      \n        rank\n      \n    \n    \n      overall\n      offense\n      defense\n      overall\n      offense\n      defense\n    \n  \n  \n    \n      ppa\n    \n    2018\nAppalachian State\nadjusted\n0.221\n0.016\n0.205\n20\n60\n9\n    2018\nAppalachian State\nraw\n0.316\n0.164\n0.151\n4\n21\n3\n    2018\nOklahoma\nadjusted\n0.357\n0.429\n−0.072\n5\n1\n103\n    2018\nOklahoma\nraw\n0.246\n0.429\n−0.183\n10\n1\n117"
  },
  {
    "objectID": "estimating_efficiency.html#opponent-adjusted",
    "href": "estimating_efficiency.html#opponent-adjusted",
    "title": "CFB Team Efficiency",
    "section": "",
    "text": "How do we adjust a team’s offensive/defensive efficiency rating based on their opponents?\nI use a ridge regression to partial out the effect of all offenses on all defenses on predicted points oer play. That is, I regress the net predicted points per play on a dummy variable for every offense, defense, as well as an indicator for home field advantage:\n\\[PPA = Offense_{i} + Defense_{j} + Home\\]\nThe coefficient for each offense and defense represent that particular school’s average effect on predicted points per play conditional on all other teams. Good offenses will have positive coefficients (how much more the team scored on a given play than average) while good defenses will have negative coefficients (because they prevented other teams from scoring). Flipping the sign for defense (so that positive is considered good) produces each team’s offensive/defensive net points per play conditional on their opponents.\nI fit regressions at the season level for all teams to examine each team’s offensive/defensive efficiency over the course of an entire season. The coefficients from these regressions can then used to examine how team’s perform on offensive/defense in terms of net points per play.\nFor example, the following visualization places all teams based on their offensive and defensive strengths in the 2023 season. The best teams are those in the upper right quadrant that have strong offenses and defenses. The worst teams are those in the bottom left quadrant with poor offenses and defenses.\n\n\nShow the code\nplot_teams_by_season = function(data, lim = 0.4) {\n  \n  data |&gt;\n    pivot_wider(names_from = c(\"type\"),\n                values_from = c(\"estimate\")) |&gt;\n    ggplot(aes(x=offense,\n               y=defense,\n               label = team,\n               color = team))+\n    geom_label(size = 2, alpha = 0.8) +\n    scale_color_cfb()+\n    facet_wrap(season ~.)+\n    geom_hline(yintercept = 0, linetype = 'dotted')+\n    geom_vline(xintercept = 0, linetype = 'dotted')+\n    coord_cartesian(xlim = c(-lim, lim),\n                    ylim = c(-lim, lim))+\n    labs(title = \"Offensive and Defensive Efficiency by Season\",\n         subtitle = stringr::str_wrap(\"Opponent adjusted team offensive and defensive efficiency ratings based on net predicted points per play.\", 120))+\n    xlab(\"Offensive Net Points per Play\")+\n    ylab(\"Defensive Net Points per Play\")\n  \n}\n\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special' ) |&gt;\n  filter(season == 2023) |&gt;\n  plot_teams_by_season()\n\n\n\n\n\n\n\n\n\nThe same information, but in a table.\n\n\nShow the code\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special' ) |&gt;\n  select(-play_situation) |&gt;\n  filter(season == 2023) |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  pivot_wider(names_from = c(\"type\"),\n              values_from = c(\"estimate\", \"rank\")) |&gt;\n  arrange(desc(estimate_overall)) |&gt;\n  select(-metric) |&gt;\n  efficiency_tbl(with_ranks = T, with_estimates = T) |&gt;\n  gt::opt_interactive(page_size_default = 25)"
  },
  {
    "objectID": "estimating_efficiency.html#individual-teams",
    "href": "estimating_efficiency.html#individual-teams",
    "title": "CFB Team Efficiency",
    "section": "2.1 Individual Teams",
    "text": "2.1 Individual Teams\nI can examine a team’s performance year over year to see how program has fared since 2007.\n\n2.1.1 Alabama\nAlabama, for example, was a highly efficient team for basically the entirety of Nick Saban’s tenure. It shouldn’t be a shock that Alabama would rate highly, but it is interesting to see the difference in compositions of Nick Saban’s teams. The 2015/2016 Alabama teams were evidently defensive powerhouses while not being particularly noteworthy on offense. After 2017 Alabama became one of the best offensive teams in the country while their defenses were less highly rated.\n\n\nShow the code\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation == 'offense/defense') |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  plot_team_efficiency(teams = 'Alabama')\n\n\n\n\n\n\n\n\n\nIn addition to examining team’s by their overall offensive/defensive performance, I further break down a team’s offensive/defensive based on their net points per play when passing or rushing. As before, I regress each team’s offense and defense on predicted points per play, fitting individual regressions by play type (pass or run). This allows me to estimate a team’s performance in different aspects of the game on both sides of the ball.\nAlabama, for instance, had three down years of offensive passing efficiency from 2015-2017. That changed in 2018 when Alabama led the nation in passing efficiency for three straight years.\n\n\nShow the code\nadjusted_efficiency_category_ppa |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks(groups = c(\"season\", \"type\", \"metric\", \"play_category\")) |&gt;\n  filter(type == 'offense',\n         play_category %in% c('pass', 'rush')) |&gt;\n  plot_team_efficiency(teams = 'Alabama') +\n  facet_grid(play_category ~ type)\n\n\n\n\n\n\n\n\n\n\n\n2.1.2 Iowa\nIowa, meanwhile, looks exactly like what you would expect. They had fairly strong teams overall at the end of the 2010s, and their defensive has consistently been top tier since 2017, but their offensive efficiency has been, in highly sophisticated analytics terms, complete garbo.\n\n\nShow the code\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation == 'offense/defense') |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  plot_team_efficiency(teams = 'Iowa')\n\n\n\n\n\n\n\n\n\nAlso it’s evidently not just because they don’t believe in the forward pass; they seem to be getting worse at passing and running in recent years.\n\n\nShow the code\nadjusted_efficiency_category_ppa |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks(groups = c(\"season\", \"type\", \"metric\", \"play_category\")) |&gt;\n  filter(type == 'offense',\n         play_category %in% c('pass', 'rush')) |&gt;\n  plot_team_efficiency(teams = 'Iowa') +\n  facet_grid(play_category ~ type)\n\n\n\n\n\n\n\n\n\nAt least they’re also equally decent at stopping the pass and run?\n\n\nShow the code\nadjusted_efficiency_category_ppa |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks(groups = c(\"season\", \"type\", \"metric\", \"play_category\")) |&gt;\n  filter(type == 'defense',\n         play_category %in% c('pass', 'rush')) |&gt;\n  plot_team_efficiency(teams = 'Iowa') +\n  facet_grid(play_category ~ type)\n\n\n\n\n\n\n\n\n\nLooking at Iowa’s offensive/defensive breakdown historically in a table.\n\n\nShow the code\nadjusted_efficiency_category_ppa |&gt;\n  filter(play_category != 'special') |&gt;\n  team_efficiency_category_tbl(team = 'Iowa') |&gt;\n  gt::opt_interactive(\n    page_size_default = 25\n  )\n\n\n\n\n\n\n\n\n\n\n\n2.1.3 Florida State\nFlorida State was pretty up and down during this time period, with gradual improvement at the start of the Jimbo era culminating in the 2013 national championship. They then fell off during the Taggart era before rebounding (seemingly) under Norell.\n\n\nShow the code\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation == 'offense/defense') |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks() |&gt;\n  plot_team_efficiency(teams = 'Florida State')\n\n\n\n\n\n\n\n\n\nWhat happened with their offensive efficiency in 2017? It looks like the 2017 team struggled to pass and run the ball.\n\n\nShow the code\nadjusted_efficiency_category_ppa |&gt;\n  add_overall_efficiency() |&gt;\n  add_team_ranks(groups = c(\"season\", \"type\", \"metric\", \"play_category\")) |&gt;\n  filter(type == 'offense',\n         play_category %in% c('pass', 'rush')) |&gt;\n  plot_team_efficiency(teams = 'Florida State') +\n  facet_grid(play_category ~ type)"
  },
  {
    "objectID": "estimating_efficiency.html#top-teams",
    "href": "estimating_efficiency.html#top-teams",
    "title": "CFB Team Efficiency",
    "section": "2.2 Top Teams",
    "text": "2.2 Top Teams\nWhich teams are considered the best overall using this methodology? I examine the top teams based on offensive/defensive efficiency since 2007.\n\n\nShow the code\nadjusted_efficiency_overall_ppa |&gt;\n  filter(play_situation != 'special') |&gt;\n  select(-play_situation) |&gt;\n  efficiency_top_teams_tbl(n = 5000) |&gt;\n  gt::opt_interactive(page_size_default = 25,\n                      use_filters = T)\n\n\n\n\n\n\n\n\n\nOhio State 2019 and Alabama 2018 at the top will probably start some fights but this looks pretty reasonable overall.\nI can similarly break this out based on pass/rush offense and defense."
  },
  {
    "objectID": "estimating_efficiency.html#categorizing-teams",
    "href": "estimating_efficiency.html#categorizing-teams",
    "title": "CFB Team Efficiency",
    "section": "2.3 Categorizing Teams",
    "text": "2.3 Categorizing Teams\nWhat is the relationship between offense and defense? Do teams with good rushing offense tend to also have good passing?\nOn offense, there’s generally a positive relationship between passing and rushing, as good offenses tend to be able to pass and run the ball. There are some interesting teams that stick out though, such as Georgia Southern in 2015 with a strong rushing game but essentially no passing game.\n\n\nShow the code\nteam_efficiency_categories |&gt;\n  ggplot(aes(x=pass_offense, y=rush_offense, color = team))+\n  geom_vline(xintercept = 0, linetype = 'dotted')+\n  geom_hline(yintercept = 0, linetype = 'dotted')+\n  geom_label(\n    aes(label = paste(team, season)),\n    size = 1.5,\n    alpha = 0.5\n  )+\n  scale_color_cfb()+\n  xlab(\"Pass Offense Efficiency\")+\n  ylab(\"Rush Offense Efficiency\")\n\n\n\n\n\n\n\n\n\nPass/rush defense also tends to be related in the same way, though there are some outliers such as Navy 2022 and Miami Ohio in 2020 that were evidently strong at defending the pass but bad at defending the run?\n\n\nShow the code\nteam_efficiency_categories |&gt;\n  ggplot(aes(x=pass_defense, y=rush_defense, color = team))+\n  geom_vline(xintercept = 0, linetype = 'dotted')+\n  geom_hline(yintercept = 0, linetype = 'dotted')+\n  geom_label(\n    aes(label = paste(team, season)),\n    size = 1.5,\n    alpha = 0.5\n  )+\n  scale_color_cfb()+\n  xlab(\"Pass Defense Efficiency\")+\n  ylab(\"Rush Defense Efficiency\")\n\n\n\n\n\n\n\n\n\nI’m interested to see what it looks if we map every team-season based on each of these offensive/defensive categories. Basically, I want to take the information of the previous two plots and collapse it into one chart where we can see teams that are strong on both sides of the ball vs teams that are strong at only area.\nTo do this, I’ll fit a PCA to offensive/defensive categories to reduce the dimensionality of the data and plot every team on the first two resulting principal components.\n\n\nShow the code\nteam_pca = \n  team_efficiency_categories |&gt;\n  select(contains(\"offense\"), contains(\"defense\")) |&gt;\n  scale() |&gt;\n  prcomp()\n\nteam_pca |&gt; \n  tidy(matrix = \"rotation\") |&gt;\n  mutate(PC = paste0(\"PC\",PC)) |&gt; pivot_wider(names_from = \"PC\", values_from = \"value\") |&gt;\n  gt_tbl() |&gt;\n  gt::fmt_number(decimals = 3)\n\n\n\n\n\n  \n    \n      column\n      PC1\n      PC2\n      PC3\n      PC4\n    \n  \n  \n    pass_offense\n0.494\n−0.498\n−0.689\n0.179\n    rush_offense\n0.488\n−0.518\n0.689\n−0.138\n    pass_defense\n0.515\n0.470\n−0.152\n−0.701\n    rush_defense\n0.502\n0.513\n0.165\n0.677\n  \n  \n  \n\n\n\n\nThis should provide us a (somewhat messy) mapping that characterizes different types of teams based on their team efficiences in offense/defense situations. I’ll place all teams in 2023.\n\n\nShow the code\nplot_teams_pca = function(data) {\n  \n  data |&gt;\n    rename_with(.fn = ~ gsub(\".fitted\", \"\", .x)) |&gt;\n    ggplot(aes(x=PC2, y=PC1, color = team))+\n    geom_label(\n      aes(label = paste(team, season)),\n      size = 1.5,\n      alpha = 0.5\n    )+\n    scale_color_cfb()+\n    coord_cartesian(ylim = c(-6, 6),\n                    xlim = c(-4.2, 4.2))\n}\n\nteam_pca |&gt;\n  augment(team_efficiency_categories) |&gt;\n  filter(season == 2023) |&gt;\n  plot_teams_pca()\n\n\n\n\n\n\n\n\n\nThe first principal component maps to overall strength, meaning the best teams are those that are highest on y axis (Michigan, Oregon, Ohio State) while the second principal component maps to a team’s balance between offense/defense.\nTeams that are stronger at offense than defense (Oregon, Liberty, New Mexico) are on the left side of the charter while teams that are stronger at defense than offense are on the right (Penn State, Iowa).\n\n\nShow the code\nteam_efficiency_categories |&gt;\n  filter(season == 2023) |&gt;\n  arrange(desc(pass_offense)) |&gt;\n  efficiency_top_categories_tbl() |&gt;\n  gt::opt_interactive(page_size_default = 25)\n\n\n\n\n\n\n\n\n\nI’ll plot all teams over this time period using the same approach via principal components.\n\n\nShow the code\nteam_pca |&gt;\n  augment(team_efficiency_categories) |&gt;\n  plot_teams_pca()"
  },
  {
    "objectID": "expected_points.html",
    "href": "expected_points.html",
    "title": "Expected Points and College Football",
    "section": "",
    "text": "I develop and explore an expected points model at the play level for evaluating college football offenses and defenses. The goal of this analysis is to place a value on offensive/defensive plays in terms of their contribution’s to a team’s expected points.\nThe data comes from collegefootballdata.com, which has play by play data on games from 2000 to present. Each observation represents one play in a game, in which we know the team, the situation (down, time remaining), and the location on the field (yards to go, yards to reach end zone). We have information about the types of plays as well in a text field.\n\n\n\n\n\n\nNote\n\n\n\nDue to data quality issues, I focus my analysis on the years from 2007 and onwards.\n\n\n\n\nFor each play in a game, I model the probability of the next scoring event that will occur within the same half for either team. This means the analysis is not at the drive level, but at what I dub the sequence level. For any given play, the next scoring event can take on one of seven outcomes:\n\nTouchdown (7 points)\nField goal (3 points)\nSafety (2 points)\nNo Score (0 points)\nOpponent safety (-2 points)\nOpponent field goal (-3 points)\nOpponent touchdown (-7 points)\n\nSuppose we have two teams, A and B, playing in a game. Team A receives the opening kickoff, begins drive #1, drives for a few plays, and then punts. Team B takes over, which starts drive #2, and they drive for a few plays before also punting. Team A then manages to finally put points on the board, scoring a TD on drive #3.\n\n\nShow the code\ntibble(\n  offense = c(\"A\", \"B\", \"A\"),\n  defense = c(\"B\", \"A\", \"B\"),\n  drive = c(1, 2, 3),\n  drive_result = c(\"PUNT\", \"PUNT\", \"TD\"),\n  score_result = c(NA, NA, \"OFFENSE TD\")\n) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      drive\n      drive_result\n      score_result\n    \n  \n  \n    A\nB\n1\nPUNT\n—\n    B\nA\n2\nPUNT\n—\n    A\nB\n3\nTD\nOFFENSE TD\n  \n  \n  \n\n\n\n\nAll plays on these three drives are one sequence. The outcome of this sequence is the points scored by Team A - if they score a touchdown, their points from this sequence is 7 (assuming for now they make the extra point). Team B’s points from this sequence is -7 points.\nThis means that each one of these play was leading up to the Next Scoring Event of Team A scoring, which was the outcome we assign to each drive (and play) in that sequence.\n\n\nShow the code\ntibble(\n  offense = c(\"A\", \"B\", \"A\"),\n  defense = c(\"B\", \"A\", \"B\"),\n  sequence = c(1, 1, 1),\n  drive = c(1, 2, 3),\n  drive_result = c(\"PUNT\", \"PUNT\", \"TD\"),\n  score_result = c(NA, NA, \"OFFENSE TD\"),\n  next_score_event = c(\"team A TD\", \"team A TD\", \"team A TD\")\n) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      sequence\n      drive\n      drive_result\n      score_result\n      next_score_event\n    \n  \n  \n    A\nB\n1\n1\nPUNT\n—\nteam A TD\n    B\nA\n1\n2\nPUNT\n—\nteam A TD\n    A\nB\n1\n3\nTD\nOFFENSE TD\nteam A TD\n  \n  \n  \n\n\n\n\nIf the team on offense drives down and scores a TD/FG, this will end the sequence. If the team on offense does not score but punts or turns the ball over, the sequence will continue with the other team now on offense. The sequence will continue until either one team scores, or the half comes to an end. From this, a sequence begins at kickoff and ends at the next kick off. When Team A kicks off to Team B to start drive #4, we start our next sequence, which will end either with one team scoring or at the end of the half.\nWhy model the outcome of sequences rather than individual drives? Individual plays have the potential to affect both team’s chances of scoring, positively or negatively, and we want our model to directly capture this. If an offense turns the ball over at midfield, they are not only hurting their own chances of scoring, they are increasing the other team’s chance of scoring. The value of a play in terms of expected points is function of how both team’s probabilities are affected by the result of the play.\n\n\n\nA team’s expected points is sum of the probability of each possible scoring event multiplied by the points of that event. For this analysis, I assume that touchdowns equate to 7 rather than 6 points, assuming that extra points will be made. I can later bake in the actual probability of making extra points, but this will be a simplification for now.\nFor a given play \\(i\\) for Team \\(A\\) facing Team \\(B\\), we can compute Team A’s expected points using the following:\n\\[\\begin{align*}\n{Expected Points}_A = \\\\\nPr(TD_A)*7 \\\\\n+ Pr(FG_A)*3 \\\\\n+ Pr(Safety_A)*2 \\\\\n+ Pr(No Score)*0 \\\\\n+ Pr(Safety_B)*-2 \\\\\n+ Pr(FG_B) * -3\\\\\n+ Pr(TD_B) * -7\n\\end{align*}\\]\nHow do we get the probabilities of each scoring event? We learn these from historical data by using a model - I train a multinomial logistic regression model on many seasons worth of college football plays to learn how situations on the field affect the probability of the next scoring event.\n\n\n\nThe outcome for our analysis is the next scoring event. Each play in a given sequence contributes to the eventual outcome of the sequence. Here we can see an example of one game and its drives:\n\n\nShow the code\nsample_games = tibble(game_id = 322520245)\n\ncfbd_drives_tbl |&gt;\n    inner_join(sample_games) |&gt;\n    select(season, game_id, offense, defense, drive_number, drive_result) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      season\n      game_id\n      offense\n      defense\n      drive_number\n      drive_result\n    \n  \n  \n    2012\n322520245\nTexas A&M\nFlorida\n1\nFG GOOD\n    2012\n322520245\nFlorida\nTexas A&M\n2\nRUSHING TD\n    2012\n322520245\nTexas A&M\nFlorida\n3\nRUSHING TD\n    2012\n322520245\nFlorida\nTexas A&M\n4\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n5\nRUSHING TD\n    2012\n322520245\nFlorida\nTexas A&M\n6\nFG GOOD\n    2012\n322520245\nTexas A&M\nFlorida\n7\nEND OF HALF\n    2012\n322520245\nFlorida\nTexas A&M\n8\nFG GOOD\n    2012\n322520245\nTexas A&M\nFlorida\n9\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n10\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n11\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n12\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n13\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n14\nRUSHING TD\n    2012\n322520245\nTexas A&M\nFlorida\n15\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n16\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n17\nFUMBLE\n    2012\n322520245\nFlorida\nTexas A&M\n18\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n19\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n20\nEND OF HALF\n  \n  \n  \n\n\n\n\nFor this game, we can filter to the plays that took place in the lead up to first score event. In this case, the first sequence included one drive and ended when Texas A&M kicked a field goal.\n\n\nShow the code\n# function to display plays in a drive\ndrive_plays_tbl &lt;- function(data) {\n\n    data |&gt;\n    select(season, game_id, offense, defense, drive_number, down, distance, yards_to_goal, play_text, next_score_event_offense) |&gt;\n    group_by(season, game_id, drive_number) |&gt;\n    gt_tbl() |&gt;\n    gt::cols_label(next_score_event_offense = \"next_score_event\") |&gt;\n    gt::cols_align(columns = c(\"offense\", \"defense\", \"down\", \"distance\", \"yards_to_goal\"), align = \"center\")\n}\n\n# show first drive\nprepared_pbp |&gt;\n  inner_join(sample_games) |&gt;\n  filter(drive_number == 1) |&gt;\n  drive_plays_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      down\n      distance\n      yards_to_goal\n      play_text\n      next_score_event\n    \n  \n  \n    \n      2012 - 322520245 - 1\n    \n    Texas A&M\nFlorida\n1\n10\n75\nTEXAS A&M penalty 5 yard False Start on Patrick Lewis accepted.\nFG\n    Texas A&M\nFlorida\n1\n15\n80\nChristine Michael rush for no gain to the TexAM 20.\nFG\n    Texas A&M\nFlorida\n2\n15\n80\nJohnny Manziel pass complete to Ryan Swope for a loss of 2 yards to the TexAM 18.\nFG\n    Texas A&M\nFlorida\n3\n17\n82\nJohnny Manziel rush for 16 yards to the 50 yard line, FLORIDA penalty 16 yard Personal Foul accepted for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n10\n50\nJohnny Manziel pass complete to Kenric McNeal for 8 yards to the Fla 42.\nFG\n    Texas A&M\nFlorida\n2\n2\n42\nChristine Michael rush for 2 yards to the Fla 40 for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n10\n40\nJohnny Manziel pass complete to Kenric McNeal for 3 yards to the Fla 37.\nFG\n    Texas A&M\nFlorida\n2\n7\n37\nChristine Michael rush for 6 yards to the Fla 31.\nFG\n    Texas A&M\nFlorida\n3\n1\n31\nChristine Michael rush for no gain to the Fla 31.\nFG\n    Texas A&M\nFlorida\n4\n1\n31\nJohnny Manziel pass complete to Nehemiah Hicks for 8 yards to the Fla 23 for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n10\n23\nJohnny Manziel pass complete to Ryan Swope for 2 yards to the Fla 21.\nFG\n    Texas A&M\nFlorida\n2\n8\n21\nJohnny Manziel pass complete to Christine Michael for 14 yards to the Fla 7 for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n7\n7\nJohnny Manziel pass incomplete to Kenric McNeal, broken up by Matt Elam.\nFG\n    Texas A&M\nFlorida\n2\n7\n7\nJohnny Manziel pass incomplete to Mike Evans, broken up by Marcus Roberson.\nFG\n    Texas A&M\nFlorida\n3\n7\n7\nJohnny Manziel rush for 3 yards to the Fla 9, TEXAS A&M penalty 5 yard Illegal Forward Pass on Johnny Manziel accepted.\nFG\n    Texas A&M\nFlorida\n4\n9\n9\nTaylor Bertolet 27 yard field goal GOOD.\nFG\n  \n  \n  \n\n\n\n\nIf we look at another sequence in the second half, we can see there were multiple drives before a team was able to score in that sequence.\n\n\n\n\n\n\nNote\n\n\n\nThe next scoring event is always defined from the perspective of the offense.\n\n\n\n\nShow the code\nprepared_pbp |&gt;\n    inner_join(sample_games) |&gt;\n    filter(drive_number &gt; 8 & drive_number &lt; 15) |&gt;\n    drive_plays_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      down\n      distance\n      yards_to_goal\n      play_text\n      next_score_event\n    \n  \n  \n    \n      2012 - 322520245 - 9\n    \n    Texas A&M\nFlorida\n1\n10\n73\nChristine Michael rush for 6 yards to the TexAM 33.\nOpp_TD\n    Texas A&M\nFlorida\n2\n4\n67\nChristine Michael rush for 1 yard to the TexAM 34.\nOpp_TD\n    Texas A&M\nFlorida\n3\n3\n66\nJohnny Manziel pass complete to Mike Evans for 1 yard to the TexAM 35.\nOpp_TD\n    Texas A&M\nFlorida\n4\n2\n65\nRyan Epperson punt for 42 yards, fair catch by Andre Debose at the Fla 23.\nOpp_TD\n    \n      2012 - 322520245 - 10\n    \n    Florida\nTexas A&M\n1\n10\n77\nJeff Driskel pass complete to Frankie Hammond for 10 yards to the Fla 33 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n67\nMike Gillislee rush for 4 yards to the Fla 37.\nTD\n    Florida\nTexas A&M\n2\n6\n63\nJeff Driskel pass complete to Omarius Hines for 7 yards to the Fla 44 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n56\nMike Gillislee rush for 3 yards to the Fla 47.\nTD\n    Florida\nTexas A&M\n2\n7\n53\nJeff Driskel sacked by Spencer Nealy for a loss of 1 yard to the Fla 46.\nTD\n    Florida\nTexas A&M\n3\n8\n54\nJeff Driskel sacked by Sean Porter and Damontre Moore for a loss of 12 yards to the Fla 34.\nTD\n    Florida\nTexas A&M\n4\n20\n66\nKyle Christy punt for 48 yards, fair catch by Dustin Harris at the TexAM 18.\nTD\n    \n      2012 - 322520245 - 11\n    \n    Texas A&M\nFlorida\n1\n10\n82\nJohnny Manziel pass complete to Mike Evans for a loss of 2 yards to the TexAM 16.\nOpp_TD\n    Texas A&M\nFlorida\n2\n12\n84\nTrey Williams rush for a loss of 2 yards to the TexAM 14.\nOpp_TD\n    Texas A&M\nFlorida\n3\n14\n86\nJohnny Manziel rush for 3 yards to the TexAM 17.\nOpp_TD\n    Texas A&M\nFlorida\n4\n11\n83\nRyan Epperson punt for 53 yards, downed at the Fla 30.\nOpp_TD\n    \n      2012 - 322520245 - 12\n    \n    Florida\nTexas A&M\n1\n10\n70\nJeff Driskel pass complete to Jordan Reed for 5 yards to the Fla 35.\nTD\n    Florida\nTexas A&M\n2\n5\n65\nMack Brown rush for no gain to the Fla 35.\nTD\n    Florida\nTexas A&M\n3\n5\n65\nJeff Driskel rush for 14 yards to the Fla 49 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n51\nMatt Jones rush for 5 yards to the TexAM 46.\nTD\n    Florida\nTexas A&M\n2\n5\n46\nJeff Driskel pass incomplete.\nTD\n    Florida\nTexas A&M\n3\n5\n46\nJeff Driskel rush for no gain to the TexAM 46.\nTD\n    Florida\nTexas A&M\n4\n5\n46\nKyle Christy punt for 37 yards, fair catch by Dustin Harris at the TexAM 9.\nTD\n    \n      2012 - 322520245 - 13\n    \n    Texas A&M\nFlorida\n1\n10\n91\nJohnny Manziel pass complete to Mike Evans for 14 yards to the TexAM 23 for a 1ST down.\nOpp_TD\n    Texas A&M\nFlorida\n1\n10\n77\nTEXAS A&M penalty 11 yard Personal Foul on Kenric McNeal accepted.\nOpp_TD\n    Texas A&M\nFlorida\n1\n10\n88\nJohnny Manziel pass complete to Thomas Johnson for 2 yards to the TexAM 14.\nOpp_TD\n    Texas A&M\nFlorida\n2\n8\n86\nJohnny Manziel pass complete to Mike Evans for 5 yards to the TexAM 19.\nOpp_TD\n    Texas A&M\nFlorida\n3\n3\n81\nJohnny Manziel sacked by Lerentee McCray for a loss of 4 yards to the TexAM 15.\nOpp_TD\n    Texas A&M\nFlorida\n4\n7\n85\nRyan Epperson punt for 47 yards, fair catch by Andre Debose at the Fla 38.\nOpp_TD\n    \n      2012 - 322520245 - 14\n    \n    Florida\nTexas A&M\n1\n10\n62\nMike Gillislee rush for 5 yards to the Fla 43.\nTD\n    Florida\nTexas A&M\n2\n5\n57\nJeff Driskel pass complete to Omarius Hines for 39 yards to the TexAM 18 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n18\nSolomon Patton rush for 6 yards to the TexAM 12.\nTD\n    Florida\nTexas A&M\n2\n4\n12\nMike Gillislee rush for 12 yards for a TOUCHDOWN.\nTD\n  \n  \n  \n\n\n\n\n\n\n\nOur goal is to understand how individual plays contribute to a team’s expected points, or the average points a team should expect to score on average given their situation (down, time, possession).\nFor instance, in the first drive of the Texas A&M-Florida game in 2012, Texas A&M received the ball at their own 25 yard line to open the game.\nThe simplest intuition of expected points is to ask, for teams starting at the 25 yard line at the beginning of a game, how many points do they typically go on to score?\nOne way to answer this is to look at all starting drives with 75 yards to go and see what the eventual next scoring event was for each of these plays - we simply take the average of all of the points that followed from teams in this situation.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yards_to_goal == 75 & drive_number == 1) |&gt;\n  group_by(next_score_event_offense, yards_to_goal, drive_number) |&gt;\n  count(sort = T) |&gt;\n  ungroup() |&gt;\n  mutate(prop = n / sum(n)) |&gt;\n  mutate_if(is.numeric, round, 3) |&gt;\n  gt_tbl()\n\n\n\n\n\n  \n    \n      next_score_event_offense\n      yards_to_goal\n      drive_number\n      n\n      prop\n    \n  \n  \n    TD\n75\n1\n2807\n0.385\n    Opp_TD\n75\n1\n2528\n0.346\n    FG\n75\n1\n982\n0.135\n    Opp_FG\n75\n1\n914\n0.125\n    Safety\n75\n1\n25\n0.003\n    No_Score\n75\n1\n24\n0.003\n    Opp_Safety\n75\n1\n20\n0.003\n  \n  \n  \n\n\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yards_to_goal == 75 & drive_number == 1) |&gt;\n  summarize(\n    expected_points = round(mean(next_score_event_offense_diff), 3),\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      expected_points\n      n\n    \n  \n  \n    0.297\n7300\n  \n  \n  \n\n\n\n\nIn this case, we find teams with the ball at their own 25 to start the game generally obtained more points on the ensuing sequence than their opponents, so they have a slightly positive expected points.\nBut, expected points is also a function of the down. If we look at the expected points for a team in this situation in first down vs a team in this situation for fourth down, we should see a drop in their expected points - by the time you hit fourth down, if you haven’t moved from the 25, your expected points drops into the negatives, as you will now be punting the ball back to your opponent and it becomes more probable that they score than you.\n\n\nShow the code\nprepared_pbp |&gt;\n    filter(yards_to_goal == 75 & drive_number == 1) |&gt;\n    group_by(yards_to_goal, down) |&gt;\n    summarize(\n        expected_points = mean(next_score_event_offense_diff, na.rm = T),\n        n = n(),\n        .groups = \"drop\"\n    ) |&gt;\n        mutate_if(is.numeric, round, 3) |&gt;\n        gt_tbl()\n\n\n\n\n\n  \n    \n      yards_to_goal\n      down\n      expected_points\n      n\n    \n  \n  \n    75\n1\n0.617\n5487\n    75\n2\n-0.308\n1164\n    75\n3\n-0.711\n429\n    75\n4\n-2.527\n220\n  \n  \n  \n\n\n\n\n\n\n\nThe fact that expected points changes based on the situation (down, yard line, time remaining) allows us to calculate the difference in expected points from play to play. That is, before the ball is snapped, we ask, what is the expected points given the current situation?\nThen the ball is hiked and the play occurs; what is the expected points now? Did it increase or decrease? This difference in expected points from play to play, positive or negative, is what we refer to as Expected Points Added.\nFor any given play, we get a sense of the expected points a team can expect from their situation. For instance, if we look at all total plays in a game, how do expected points vary as a function of a team’s distance from their opponent’s goal line?\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) %&gt;%\n  group_by(yards_to_goal) |&gt;\n  summarize(\n    expected_points = mean(next_score_event_offense_diff, na.rm = T),\n    n = n()\n  ) %&gt;%\n  ggplot(., aes(\n    x = yards_to_goal,\n    y = expected_points\n  )) +\n  geom_line() +\n  geom_point(aes(size = n)) +\n  geom_hline(\n    yintercept = 0,\n    linetype = \"dashed\"\n  ) +\n  scale_x_reverse()\n\n\n\n\n\n\n\n\n\nThis should make sense - if you’re backed up against your own end zone, your opponent has higher expected points because they are, historically, more likely to have the next scoring event - either by gaining good field advantage after you punt or by getting a safety. We can see this if we just look at the proportion of next scoring events based on the offense’s position on the field.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) %&gt;%\n  group_by(yards_to_goal, next_score_event_offense) |&gt;\n  count() |&gt;\n  ggplot(aes(x=yards_to_goal, y=n, fill = next_score_event_offense))+\n  geom_col(position = 'fill')+\n  scale_x_reverse()+\n  scale_fill_viridis_d()+\n  ylab(\"proportion\")\n\n\n\n\n\n\n\n\n\nFrom this, when we see an offense move the ball up the field on a given play, we will generally see their expected points go up. The difference in expected points before the snap and after the snap is the value added (positively or negatively) by the play.\nBut, it’s not just position on the field - it’s also about the situation. If we look at how expected points varies by the down, we should see that fourth downs have lower expected points.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) |&gt;\n  group_by(yards_to_goal, down = as.character(down)) |&gt;\n  summarize(\n    expected_points = mean(next_score_event_offense_diff, na.rm = T),\n    n = n(),\n    .groups = 'drop'\n  ) |&gt;\n  ggplot(aes(\n    x = yards_to_goal,\n    y = expected_points,\n    color = down\n  )) +\n  geom_point(aes(size = n)) +\n  geom_hline(\n    yintercept = 0,\n    linetype = \"dashed\"\n  ) +\n  scale_x_reverse()+\n  scale_color_viridis_d()+\n  guides(size = 'none')\n\n\n\n\n\n\n\n\n\nWe also have other features like distance and down.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) |&gt;\n  filter(distance &lt;= 30, distance &gt;=0) |&gt;\n  group_by(down, distance, next_score_event_offense) |&gt;\n  count() |&gt;\n  ggplot(aes(x=distance, y=n, fill = next_score_event_offense))+\n  geom_col(position = 'fill')+\n  scale_fill_viridis_d()+\n  facet_wrap(down ~.)+\n  ylab(\"proportion\")\n\n\n\n\n\n\n\n\n\nAnd we also have info on time remaining in the half - as we might expect, the proportion of drives leading to no scoring goes up as the amount of time remaining in the half goes down.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) |&gt;\n  group_by(\n    seconds_in_half = round_any(seconds_in_half, 5),\n    next_score_event_offense\n  ) |&gt;\n    count() |&gt;\n    ggplot(aes(x = seconds_in_half, y = n, fill = next_score_event_offense)) +\n    geom_col(position = \"fill\") +\n    scale_fill_viridis_d() +\n    ylab(\"proportion\")+\n    scale_x_reverse()\n\n\n\n\n\n\n\n\n\nWe use all of this historical data to learn the expected points from a given situation, then look at the difference in expected points from play to play - this is the intuition behind how we will value individual plays, which we can then roll up to the offense/defense/game/season level."
  },
  {
    "objectID": "expected_points.html#sequences-of-play",
    "href": "expected_points.html#sequences-of-play",
    "title": "Expected Points and College Football",
    "section": "",
    "text": "For each play in a game, I model the probability of the next scoring event that will occur within the same half for either team. This means the analysis is not at the drive level, but at what I dub the sequence level. For any given play, the next scoring event can take on one of seven outcomes:\n\nTouchdown (7 points)\nField goal (3 points)\nSafety (2 points)\nNo Score (0 points)\nOpponent safety (-2 points)\nOpponent field goal (-3 points)\nOpponent touchdown (-7 points)\n\nSuppose we have two teams, A and B, playing in a game. Team A receives the opening kickoff, begins drive #1, drives for a few plays, and then punts. Team B takes over, which starts drive #2, and they drive for a few plays before also punting. Team A then manages to finally put points on the board, scoring a TD on drive #3.\n\n\nShow the code\ntibble(\n  offense = c(\"A\", \"B\", \"A\"),\n  defense = c(\"B\", \"A\", \"B\"),\n  drive = c(1, 2, 3),\n  drive_result = c(\"PUNT\", \"PUNT\", \"TD\"),\n  score_result = c(NA, NA, \"OFFENSE TD\")\n) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      drive\n      drive_result\n      score_result\n    \n  \n  \n    A\nB\n1\nPUNT\n—\n    B\nA\n2\nPUNT\n—\n    A\nB\n3\nTD\nOFFENSE TD\n  \n  \n  \n\n\n\n\nAll plays on these three drives are one sequence. The outcome of this sequence is the points scored by Team A - if they score a touchdown, their points from this sequence is 7 (assuming for now they make the extra point). Team B’s points from this sequence is -7 points.\nThis means that each one of these play was leading up to the Next Scoring Event of Team A scoring, which was the outcome we assign to each drive (and play) in that sequence.\n\n\nShow the code\ntibble(\n  offense = c(\"A\", \"B\", \"A\"),\n  defense = c(\"B\", \"A\", \"B\"),\n  sequence = c(1, 1, 1),\n  drive = c(1, 2, 3),\n  drive_result = c(\"PUNT\", \"PUNT\", \"TD\"),\n  score_result = c(NA, NA, \"OFFENSE TD\"),\n  next_score_event = c(\"team A TD\", \"team A TD\", \"team A TD\")\n) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      sequence\n      drive\n      drive_result\n      score_result\n      next_score_event\n    \n  \n  \n    A\nB\n1\n1\nPUNT\n—\nteam A TD\n    B\nA\n1\n2\nPUNT\n—\nteam A TD\n    A\nB\n1\n3\nTD\nOFFENSE TD\nteam A TD\n  \n  \n  \n\n\n\n\nIf the team on offense drives down and scores a TD/FG, this will end the sequence. If the team on offense does not score but punts or turns the ball over, the sequence will continue with the other team now on offense. The sequence will continue until either one team scores, or the half comes to an end. From this, a sequence begins at kickoff and ends at the next kick off. When Team A kicks off to Team B to start drive #4, we start our next sequence, which will end either with one team scoring or at the end of the half.\nWhy model the outcome of sequences rather than individual drives? Individual plays have the potential to affect both team’s chances of scoring, positively or negatively, and we want our model to directly capture this. If an offense turns the ball over at midfield, they are not only hurting their own chances of scoring, they are increasing the other team’s chance of scoring. The value of a play in terms of expected points is function of how both team’s probabilities are affected by the result of the play."
  },
  {
    "objectID": "expected_points.html#defining-expected-points",
    "href": "expected_points.html#defining-expected-points",
    "title": "Expected Points and College Football",
    "section": "",
    "text": "A team’s expected points is sum of the probability of each possible scoring event multiplied by the points of that event. For this analysis, I assume that touchdowns equate to 7 rather than 6 points, assuming that extra points will be made. I can later bake in the actual probability of making extra points, but this will be a simplification for now.\nFor a given play \\(i\\) for Team \\(A\\) facing Team \\(B\\), we can compute Team A’s expected points using the following:\n\\[\\begin{align*}\n{Expected Points}_A = \\\\\nPr(TD_A)*7 \\\\\n+ Pr(FG_A)*3 \\\\\n+ Pr(Safety_A)*2 \\\\\n+ Pr(No Score)*0 \\\\\n+ Pr(Safety_B)*-2 \\\\\n+ Pr(FG_B) * -3\\\\\n+ Pr(TD_B) * -7\n\\end{align*}\\]\nHow do we get the probabilities of each scoring event? We learn these from historical data by using a model - I train a multinomial logistic regression model on many seasons worth of college football plays to learn how situations on the field affect the probability of the next scoring event."
  },
  {
    "objectID": "expected_points.html#next-scoring-event",
    "href": "expected_points.html#next-scoring-event",
    "title": "Expected Points and College Football",
    "section": "",
    "text": "The outcome for our analysis is the next scoring event. Each play in a given sequence contributes to the eventual outcome of the sequence. Here we can see an example of one game and its drives:\n\n\nShow the code\nsample_games = tibble(game_id = 322520245)\n\ncfbd_drives_tbl |&gt;\n    inner_join(sample_games) |&gt;\n    select(season, game_id, offense, defense, drive_number, drive_result) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      season\n      game_id\n      offense\n      defense\n      drive_number\n      drive_result\n    \n  \n  \n    2012\n322520245\nTexas A&M\nFlorida\n1\nFG GOOD\n    2012\n322520245\nFlorida\nTexas A&M\n2\nRUSHING TD\n    2012\n322520245\nTexas A&M\nFlorida\n3\nRUSHING TD\n    2012\n322520245\nFlorida\nTexas A&M\n4\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n5\nRUSHING TD\n    2012\n322520245\nFlorida\nTexas A&M\n6\nFG GOOD\n    2012\n322520245\nTexas A&M\nFlorida\n7\nEND OF HALF\n    2012\n322520245\nFlorida\nTexas A&M\n8\nFG GOOD\n    2012\n322520245\nTexas A&M\nFlorida\n9\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n10\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n11\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n12\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n13\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n14\nRUSHING TD\n    2012\n322520245\nTexas A&M\nFlorida\n15\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n16\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n17\nFUMBLE\n    2012\n322520245\nFlorida\nTexas A&M\n18\nPUNT\n    2012\n322520245\nTexas A&M\nFlorida\n19\nPUNT\n    2012\n322520245\nFlorida\nTexas A&M\n20\nEND OF HALF\n  \n  \n  \n\n\n\n\nFor this game, we can filter to the plays that took place in the lead up to first score event. In this case, the first sequence included one drive and ended when Texas A&M kicked a field goal.\n\n\nShow the code\n# function to display plays in a drive\ndrive_plays_tbl &lt;- function(data) {\n\n    data |&gt;\n    select(season, game_id, offense, defense, drive_number, down, distance, yards_to_goal, play_text, next_score_event_offense) |&gt;\n    group_by(season, game_id, drive_number) |&gt;\n    gt_tbl() |&gt;\n    gt::cols_label(next_score_event_offense = \"next_score_event\") |&gt;\n    gt::cols_align(columns = c(\"offense\", \"defense\", \"down\", \"distance\", \"yards_to_goal\"), align = \"center\")\n}\n\n# show first drive\nprepared_pbp |&gt;\n  inner_join(sample_games) |&gt;\n  filter(drive_number == 1) |&gt;\n  drive_plays_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      down\n      distance\n      yards_to_goal\n      play_text\n      next_score_event\n    \n  \n  \n    \n      2012 - 322520245 - 1\n    \n    Texas A&M\nFlorida\n1\n10\n75\nTEXAS A&M penalty 5 yard False Start on Patrick Lewis accepted.\nFG\n    Texas A&M\nFlorida\n1\n15\n80\nChristine Michael rush for no gain to the TexAM 20.\nFG\n    Texas A&M\nFlorida\n2\n15\n80\nJohnny Manziel pass complete to Ryan Swope for a loss of 2 yards to the TexAM 18.\nFG\n    Texas A&M\nFlorida\n3\n17\n82\nJohnny Manziel rush for 16 yards to the 50 yard line, FLORIDA penalty 16 yard Personal Foul accepted for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n10\n50\nJohnny Manziel pass complete to Kenric McNeal for 8 yards to the Fla 42.\nFG\n    Texas A&M\nFlorida\n2\n2\n42\nChristine Michael rush for 2 yards to the Fla 40 for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n10\n40\nJohnny Manziel pass complete to Kenric McNeal for 3 yards to the Fla 37.\nFG\n    Texas A&M\nFlorida\n2\n7\n37\nChristine Michael rush for 6 yards to the Fla 31.\nFG\n    Texas A&M\nFlorida\n3\n1\n31\nChristine Michael rush for no gain to the Fla 31.\nFG\n    Texas A&M\nFlorida\n4\n1\n31\nJohnny Manziel pass complete to Nehemiah Hicks for 8 yards to the Fla 23 for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n10\n23\nJohnny Manziel pass complete to Ryan Swope for 2 yards to the Fla 21.\nFG\n    Texas A&M\nFlorida\n2\n8\n21\nJohnny Manziel pass complete to Christine Michael for 14 yards to the Fla 7 for a 1ST down.\nFG\n    Texas A&M\nFlorida\n1\n7\n7\nJohnny Manziel pass incomplete to Kenric McNeal, broken up by Matt Elam.\nFG\n    Texas A&M\nFlorida\n2\n7\n7\nJohnny Manziel pass incomplete to Mike Evans, broken up by Marcus Roberson.\nFG\n    Texas A&M\nFlorida\n3\n7\n7\nJohnny Manziel rush for 3 yards to the Fla 9, TEXAS A&M penalty 5 yard Illegal Forward Pass on Johnny Manziel accepted.\nFG\n    Texas A&M\nFlorida\n4\n9\n9\nTaylor Bertolet 27 yard field goal GOOD.\nFG\n  \n  \n  \n\n\n\n\nIf we look at another sequence in the second half, we can see there were multiple drives before a team was able to score in that sequence.\n\n\n\n\n\n\nNote\n\n\n\nThe next scoring event is always defined from the perspective of the offense.\n\n\n\n\nShow the code\nprepared_pbp |&gt;\n    inner_join(sample_games) |&gt;\n    filter(drive_number &gt; 8 & drive_number &lt; 15) |&gt;\n    drive_plays_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      down\n      distance\n      yards_to_goal\n      play_text\n      next_score_event\n    \n  \n  \n    \n      2012 - 322520245 - 9\n    \n    Texas A&M\nFlorida\n1\n10\n73\nChristine Michael rush for 6 yards to the TexAM 33.\nOpp_TD\n    Texas A&M\nFlorida\n2\n4\n67\nChristine Michael rush for 1 yard to the TexAM 34.\nOpp_TD\n    Texas A&M\nFlorida\n3\n3\n66\nJohnny Manziel pass complete to Mike Evans for 1 yard to the TexAM 35.\nOpp_TD\n    Texas A&M\nFlorida\n4\n2\n65\nRyan Epperson punt for 42 yards, fair catch by Andre Debose at the Fla 23.\nOpp_TD\n    \n      2012 - 322520245 - 10\n    \n    Florida\nTexas A&M\n1\n10\n77\nJeff Driskel pass complete to Frankie Hammond for 10 yards to the Fla 33 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n67\nMike Gillislee rush for 4 yards to the Fla 37.\nTD\n    Florida\nTexas A&M\n2\n6\n63\nJeff Driskel pass complete to Omarius Hines for 7 yards to the Fla 44 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n56\nMike Gillislee rush for 3 yards to the Fla 47.\nTD\n    Florida\nTexas A&M\n2\n7\n53\nJeff Driskel sacked by Spencer Nealy for a loss of 1 yard to the Fla 46.\nTD\n    Florida\nTexas A&M\n3\n8\n54\nJeff Driskel sacked by Sean Porter and Damontre Moore for a loss of 12 yards to the Fla 34.\nTD\n    Florida\nTexas A&M\n4\n20\n66\nKyle Christy punt for 48 yards, fair catch by Dustin Harris at the TexAM 18.\nTD\n    \n      2012 - 322520245 - 11\n    \n    Texas A&M\nFlorida\n1\n10\n82\nJohnny Manziel pass complete to Mike Evans for a loss of 2 yards to the TexAM 16.\nOpp_TD\n    Texas A&M\nFlorida\n2\n12\n84\nTrey Williams rush for a loss of 2 yards to the TexAM 14.\nOpp_TD\n    Texas A&M\nFlorida\n3\n14\n86\nJohnny Manziel rush for 3 yards to the TexAM 17.\nOpp_TD\n    Texas A&M\nFlorida\n4\n11\n83\nRyan Epperson punt for 53 yards, downed at the Fla 30.\nOpp_TD\n    \n      2012 - 322520245 - 12\n    \n    Florida\nTexas A&M\n1\n10\n70\nJeff Driskel pass complete to Jordan Reed for 5 yards to the Fla 35.\nTD\n    Florida\nTexas A&M\n2\n5\n65\nMack Brown rush for no gain to the Fla 35.\nTD\n    Florida\nTexas A&M\n3\n5\n65\nJeff Driskel rush for 14 yards to the Fla 49 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n51\nMatt Jones rush for 5 yards to the TexAM 46.\nTD\n    Florida\nTexas A&M\n2\n5\n46\nJeff Driskel pass incomplete.\nTD\n    Florida\nTexas A&M\n3\n5\n46\nJeff Driskel rush for no gain to the TexAM 46.\nTD\n    Florida\nTexas A&M\n4\n5\n46\nKyle Christy punt for 37 yards, fair catch by Dustin Harris at the TexAM 9.\nTD\n    \n      2012 - 322520245 - 13\n    \n    Texas A&M\nFlorida\n1\n10\n91\nJohnny Manziel pass complete to Mike Evans for 14 yards to the TexAM 23 for a 1ST down.\nOpp_TD\n    Texas A&M\nFlorida\n1\n10\n77\nTEXAS A&M penalty 11 yard Personal Foul on Kenric McNeal accepted.\nOpp_TD\n    Texas A&M\nFlorida\n1\n10\n88\nJohnny Manziel pass complete to Thomas Johnson for 2 yards to the TexAM 14.\nOpp_TD\n    Texas A&M\nFlorida\n2\n8\n86\nJohnny Manziel pass complete to Mike Evans for 5 yards to the TexAM 19.\nOpp_TD\n    Texas A&M\nFlorida\n3\n3\n81\nJohnny Manziel sacked by Lerentee McCray for a loss of 4 yards to the TexAM 15.\nOpp_TD\n    Texas A&M\nFlorida\n4\n7\n85\nRyan Epperson punt for 47 yards, fair catch by Andre Debose at the Fla 38.\nOpp_TD\n    \n      2012 - 322520245 - 14\n    \n    Florida\nTexas A&M\n1\n10\n62\nMike Gillislee rush for 5 yards to the Fla 43.\nTD\n    Florida\nTexas A&M\n2\n5\n57\nJeff Driskel pass complete to Omarius Hines for 39 yards to the TexAM 18 for a 1ST down.\nTD\n    Florida\nTexas A&M\n1\n10\n18\nSolomon Patton rush for 6 yards to the TexAM 12.\nTD\n    Florida\nTexas A&M\n2\n4\n12\nMike Gillislee rush for 12 yards for a TOUCHDOWN.\nTD"
  },
  {
    "objectID": "expected_points.html#illustrating-expected-points",
    "href": "expected_points.html#illustrating-expected-points",
    "title": "Expected Points and College Football",
    "section": "",
    "text": "Our goal is to understand how individual plays contribute to a team’s expected points, or the average points a team should expect to score on average given their situation (down, time, possession).\nFor instance, in the first drive of the Texas A&M-Florida game in 2012, Texas A&M received the ball at their own 25 yard line to open the game.\nThe simplest intuition of expected points is to ask, for teams starting at the 25 yard line at the beginning of a game, how many points do they typically go on to score?\nOne way to answer this is to look at all starting drives with 75 yards to go and see what the eventual next scoring event was for each of these plays - we simply take the average of all of the points that followed from teams in this situation.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yards_to_goal == 75 & drive_number == 1) |&gt;\n  group_by(next_score_event_offense, yards_to_goal, drive_number) |&gt;\n  count(sort = T) |&gt;\n  ungroup() |&gt;\n  mutate(prop = n / sum(n)) |&gt;\n  mutate_if(is.numeric, round, 3) |&gt;\n  gt_tbl()\n\n\n\n\n\n  \n    \n      next_score_event_offense\n      yards_to_goal\n      drive_number\n      n\n      prop\n    \n  \n  \n    TD\n75\n1\n2807\n0.385\n    Opp_TD\n75\n1\n2528\n0.346\n    FG\n75\n1\n982\n0.135\n    Opp_FG\n75\n1\n914\n0.125\n    Safety\n75\n1\n25\n0.003\n    No_Score\n75\n1\n24\n0.003\n    Opp_Safety\n75\n1\n20\n0.003\n  \n  \n  \n\n\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yards_to_goal == 75 & drive_number == 1) |&gt;\n  summarize(\n    expected_points = round(mean(next_score_event_offense_diff), 3),\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt;\n    gt_tbl()\n\n\n\n\n\n  \n    \n      expected_points\n      n\n    \n  \n  \n    0.297\n7300\n  \n  \n  \n\n\n\n\nIn this case, we find teams with the ball at their own 25 to start the game generally obtained more points on the ensuing sequence than their opponents, so they have a slightly positive expected points.\nBut, expected points is also a function of the down. If we look at the expected points for a team in this situation in first down vs a team in this situation for fourth down, we should see a drop in their expected points - by the time you hit fourth down, if you haven’t moved from the 25, your expected points drops into the negatives, as you will now be punting the ball back to your opponent and it becomes more probable that they score than you.\n\n\nShow the code\nprepared_pbp |&gt;\n    filter(yards_to_goal == 75 & drive_number == 1) |&gt;\n    group_by(yards_to_goal, down) |&gt;\n    summarize(\n        expected_points = mean(next_score_event_offense_diff, na.rm = T),\n        n = n(),\n        .groups = \"drop\"\n    ) |&gt;\n        mutate_if(is.numeric, round, 3) |&gt;\n        gt_tbl()\n\n\n\n\n\n  \n    \n      yards_to_goal\n      down\n      expected_points\n      n\n    \n  \n  \n    75\n1\n0.617\n5487\n    75\n2\n-0.308\n1164\n    75\n3\n-0.711\n429\n    75\n4\n-2.527\n220"
  },
  {
    "objectID": "expected_points.html#expected-point-situations",
    "href": "expected_points.html#expected-point-situations",
    "title": "Expected Points and College Football",
    "section": "",
    "text": "The fact that expected points changes based on the situation (down, yard line, time remaining) allows us to calculate the difference in expected points from play to play. That is, before the ball is snapped, we ask, what is the expected points given the current situation?\nThen the ball is hiked and the play occurs; what is the expected points now? Did it increase or decrease? This difference in expected points from play to play, positive or negative, is what we refer to as Expected Points Added.\nFor any given play, we get a sense of the expected points a team can expect from their situation. For instance, if we look at all total plays in a game, how do expected points vary as a function of a team’s distance from their opponent’s goal line?\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) %&gt;%\n  group_by(yards_to_goal) |&gt;\n  summarize(\n    expected_points = mean(next_score_event_offense_diff, na.rm = T),\n    n = n()\n  ) %&gt;%\n  ggplot(., aes(\n    x = yards_to_goal,\n    y = expected_points\n  )) +\n  geom_line() +\n  geom_point(aes(size = n)) +\n  geom_hline(\n    yintercept = 0,\n    linetype = \"dashed\"\n  ) +\n  scale_x_reverse()\n\n\n\n\n\n\n\n\n\nThis should make sense - if you’re backed up against your own end zone, your opponent has higher expected points because they are, historically, more likely to have the next scoring event - either by gaining good field advantage after you punt or by getting a safety. We can see this if we just look at the proportion of next scoring events based on the offense’s position on the field.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) %&gt;%\n  group_by(yards_to_goal, next_score_event_offense) |&gt;\n  count() |&gt;\n  ggplot(aes(x=yards_to_goal, y=n, fill = next_score_event_offense))+\n  geom_col(position = 'fill')+\n  scale_x_reverse()+\n  scale_fill_viridis_d()+\n  ylab(\"proportion\")\n\n\n\n\n\n\n\n\n\nFrom this, when we see an offense move the ball up the field on a given play, we will generally see their expected points go up. The difference in expected points before the snap and after the snap is the value added (positively or negatively) by the play.\nBut, it’s not just position on the field - it’s also about the situation. If we look at how expected points varies by the down, we should see that fourth downs have lower expected points.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) |&gt;\n  group_by(yards_to_goal, down = as.character(down)) |&gt;\n  summarize(\n    expected_points = mean(next_score_event_offense_diff, na.rm = T),\n    n = n(),\n    .groups = 'drop'\n  ) |&gt;\n  ggplot(aes(\n    x = yards_to_goal,\n    y = expected_points,\n    color = down\n  )) +\n  geom_point(aes(size = n)) +\n  geom_hline(\n    yintercept = 0,\n    linetype = \"dashed\"\n  ) +\n  scale_x_reverse()+\n  scale_color_viridis_d()+\n  guides(size = 'none')\n\n\n\n\n\n\n\n\n\nWe also have other features like distance and down.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) |&gt;\n  filter(distance &lt;= 30, distance &gt;=0) |&gt;\n  group_by(down, distance, next_score_event_offense) |&gt;\n  count() |&gt;\n  ggplot(aes(x=distance, y=n, fill = next_score_event_offense))+\n  geom_col(position = 'fill')+\n  scale_fill_viridis_d()+\n  facet_wrap(down ~.)+\n  ylab(\"proportion\")\n\n\n\n\n\n\n\n\n\nAnd we also have info on time remaining in the half - as we might expect, the proportion of drives leading to no scoring goes up as the amount of time remaining in the half goes down.\n\n\nShow the code\nprepared_pbp |&gt;\n  filter(yard_line &lt; 100 & yard_line &gt; 0) |&gt;\n  group_by(\n    seconds_in_half = round_any(seconds_in_half, 5),\n    next_score_event_offense\n  ) |&gt;\n    count() |&gt;\n    ggplot(aes(x = seconds_in_half, y = n, fill = next_score_event_offense)) +\n    geom_col(position = \"fill\") +\n    scale_fill_viridis_d() +\n    ylab(\"proportion\")+\n    scale_x_reverse()\n\n\n\n\n\n\n\n\n\nWe use all of this historical data to learn the expected points from a given situation, then look at the difference in expected points from play to play - this is the intuition behind how we will value individual plays, which we can then roll up to the offense/defense/game/season level."
  },
  {
    "objectID": "expected_points.html#examining-a-drive",
    "href": "expected_points.html#examining-a-drive",
    "title": "Expected Points and College Football",
    "section": "3.1 Examining a Drive",
    "text": "3.1 Examining a Drive\nGoing back to the game between Texas A&M and Florida in 2012 as an example (chosen entirely at random and not at all because it was the final home game of my last year at A&M), we can examine the first drive in terms of expected points.\n\n\nShow the code\nsample_plays &lt;-\n  pbp_fit |&gt;\n  augment(\n    prepared_pbp |&gt;\n      inner_join(sample_games) |&gt;\n      filter(drive_number == 1)\n  ) |&gt;\n  calculate_expected_points() |&gt;\n  calculate_points_added()\n\nplays_points_tbl &lt;- function(plays) {\n  plays |&gt;\n    rename(\n      ep_pre = expected_points_pre,\n      ep_post = expected_points_post,\n      ep_added = predicted_points_added,\n    ) |&gt;\n    select(season, game_id, offense, defense, period, yards_to_goal, down, distance, play_text, ep_pre, ep_post, ep_added) |&gt;\n    mutate_if(is.numeric, round, 3) |&gt;\n    gt_tbl() |&gt;\n    gt::cols_align(\n      columns = c(\"period\", \"down\", \"distance\", \"yards_to_goal\", \"ep_pre\", \"ep_post\", \"ep_added\"),\n      align = \"center\"\n    ) |&gt;\n    gt::data_color(\n      columns = c(\n        \"ep_pre\",\n        \"ep_post\",\n        \"ep_added\"\n      ),\n      method = \"numeric\",\n      domain = c(-10, 10),\n      palette = c(\"orange\", \"white\", \"dodgerblue\"),\n      na_color = \"white\"\n    ) |&gt;\n    gt::tab_options(\n        data_row.padding = px(20),\n        table.font.size = 12\n    ) |&gt;\n    gt::cols_label(\n        yards_to_goal = \"ytg\"\n    )\n}\n\nsample_plays |&gt;\n    group_by(season, game_id, period) |&gt;\n    plays_points_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      ytg\n      down\n      distance\n      play_text\n      ep_pre\n      ep_post\n      ep_added\n    \n  \n  \n    \n      2012 - 322520245 - 1\n    \n    Texas A&M\nFlorida\n75\n1\n10\nTEXAS A&M penalty 5 yard False Start on Patrick Lewis accepted.\n0.622\n-0.209\n-0.831\n    Texas A&M\nFlorida\n80\n1\n15\nChristine Michael rush for no gain to the TexAM 20.\n-0.209\n-1.144\n-0.935\n    Texas A&M\nFlorida\n80\n2\n15\nJohnny Manziel pass complete to Ryan Swope for a loss of 2 yards to the TexAM 18.\n-1.144\n-2.401\n-1.257\n    Texas A&M\nFlorida\n82\n3\n17\nJohnny Manziel rush for 16 yards to the 50 yard line, FLORIDA penalty 16 yard Personal Foul accepted for a 1ST down.\n-2.401\n2.615\n5.016\n    Texas A&M\nFlorida\n50\n1\n10\nJohnny Manziel pass complete to Kenric McNeal for 8 yards to the Fla 42.\n2.615\n3.434\n0.820\n    Texas A&M\nFlorida\n42\n2\n2\nChristine Michael rush for 2 yards to the Fla 40 for a 1ST down.\n3.434\n3.265\n-0.169\n    Texas A&M\nFlorida\n40\n1\n10\nJohnny Manziel pass complete to Kenric McNeal for 3 yards to the Fla 37.\n3.265\n2.973\n-0.292\n    Texas A&M\nFlorida\n37\n2\n7\nChristine Michael rush for 6 yards to the Fla 31.\n2.973\n3.462\n0.489\n    Texas A&M\nFlorida\n31\n3\n1\nChristine Michael rush for no gain to the Fla 31.\n3.462\n1.436\n-2.026\n    Texas A&M\nFlorida\n31\n4\n1\nJohnny Manziel pass complete to Nehemiah Hicks for 8 yards to the Fla 23 for a 1ST down.\n1.436\n4.183\n2.747\n    Texas A&M\nFlorida\n23\n1\n10\nJohnny Manziel pass complete to Ryan Swope for 2 yards to the Fla 21.\n4.183\n3.796\n-0.387\n    Texas A&M\nFlorida\n21\n2\n8\nJohnny Manziel pass complete to Christine Michael for 14 yards to the Fla 7 for a 1ST down.\n3.796\n4.973\n1.177\n    Texas A&M\nFlorida\n7\n1\n7\nJohnny Manziel pass incomplete to Kenric McNeal, broken up by Matt Elam.\n4.973\n4.382\n-0.591\n    Texas A&M\nFlorida\n7\n2\n7\nJohnny Manziel pass incomplete to Mike Evans, broken up by Marcus Roberson.\n4.382\n3.526\n-0.855\n    Texas A&M\nFlorida\n7\n3\n7\nJohnny Manziel rush for 3 yards to the Fla 9, TEXAS A&M penalty 5 yard Illegal Forward Pass on Johnny Manziel accepted.\n3.526\n2.283\n-1.244\n    Texas A&M\nFlorida\n9\n4\n9\nTaylor Bertolet 27 yard field goal GOOD.\n2.283\n—\n0.717\n  \n  \n  \n\n\n\n\nIn this case, we can see how the results of plays added or lost points in expectation.\nThe play with the most points added was Manziel’s rush for 16 yards on 3 and 17 combined with a personal foul on Florida for an additional 15 yards. A long third down inside your own territory is a negative points situation for an offense; teams in this situation usually have to punt, which leads to the other teams being more likely to score with favorable field position. Converting on a long third down and moving to midfield results in a big change in the expected points you would get from the drive.\nAn example of a negative points play is the previous play, with Manziel’s pass to Swope for 2 yards on 2nd and 15. Even though this play gained yardage, the end result left them with a 3rd and long in their own territory.\n\n\n\n\n\n\nNote\n\n\n\nThe result of this drive was a field goal, where the expected points added (~0.75) equals the actual points (3) minus the expected points from the situation (~2.25).\nHowever the metric Expected Points Added typically doesn’t include scoring plays. In analyzing an offense, I’ve seen others working with these types of model make a theoretical distinction between plays that add points vs plays that only result in a shift in the expected points of situation.\nPredicted Points Added uses both scoring plays and non scoring plays, taking into account both expected points and actual points added as a result of the play."
  },
  {
    "objectID": "expected_points.html#examining-games",
    "href": "expected_points.html#examining-games",
    "title": "Expected Points and College Football",
    "section": "3.2 Examining Games",
    "text": "3.2 Examining Games\nOnce we’ve scored plays, we can examine individual games to examine which plays had the biggest impact in terms of expected points. Here I’ll examine a few games, chosen completely at random and in no way influenced by my fandom.\n\n3.2.1 Texas A&M - Alabama 2012\nKind of interesting - this game is remembered for a lot of plays by Johnny Manziel, but the most impactful plays in the game in terms of expected points changes were actually turnovers forced by the A&M defense.\n\n\nShow the code\npbp_fit |&gt;\n  augment(\n    prepared_pbp |&gt;\n      filter(game_id == 323150333)\n  ) |&gt;\n  calculate_expected_points() |&gt;\n  calculate_points_added() |&gt;\n  top_plays_by_game() |&gt;\n  plays_points_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      period\n      ytg\n      down\n      distance\n      play_text\n      ep_pre\n      ep_post\n      ep_added\n    \n  \n  \n    \n      2012 - 323150333\n    \n    Alabama\nTexas A&M\n4\n54\n3\n6\nAJ McCarron pass complete to Amari Cooper for 54 yards for a TOUCHDOWN.\n0.929\n—\n6.071\n    Alabama\nTexas A&M\n4\n38\n1\n10\nT.J. Yeldon rush for 8 yards to the TexAM 30, fumbled, forced by Steven Terrell, recovered by TexAM Dustin Harris, Dustin Harris for 4 yards to the TexAM 34.\n3.472\n-1.462\n-4.935\n    Alabama\nTexas A&M\n1\n52\n3\n5\nAJ McCarron pass intercepted by Sean Porter at the TexAM 43, returned for 16 yards to the Alab 41.\n1.242\n-3.365\n-4.606\n    Texas A&M\nAlabama\n4\n68\n3\n8\nJohnny Manziel pass complete to Ryan Swope for 28 yards to the Alab 25, ALABAMA penalty 15 yard Personal Foul on Ha'Sean Clinton-Dix accepted for a 1ST down.\n-0.157\n4.393\n4.550\n    Alabama\nTexas A&M\n4\n88\n1\n18\nAJ McCarron pass complete to Amari Cooper for 50 yards to the TexAM 38 for a 1ST down.\n-0.660\n3.472\n4.133\n    Texas A&M\nAlabama\n1\n10\n3\n10\nJohnny Manziel pass complete to Ryan Swope for 10 yards for a TOUCHDOWN.\n3.296\n—\n3.704\n    Texas A&M\nAlabama\n1\n59\n3\n6\nJohnny Manziel rush for 32 yards to the Alab 27 for a 1ST down.\n0.718\n4.288\n3.570\n    Alabama\nTexas A&M\n2\n2\n3\n2\nEddie Lacy rush for 2 yards for a TOUCHDOWN.\n3.714\n—\n3.286\n    Alabama\nTexas A&M\n4\n60\n1\n10\nAJ McCarron pass complete to Kenny Bell for 54 yards to the TexAM 6 for a 1ST down.\n1.178\n4.437\n3.259\n    Texas A&M\nAlabama\n4\n24\n1\n10\nJohnny Manziel pass complete to Malcome Kennedy for 24 yards for a TOUCHDOWN.\n4.172\n—\n2.828\n  \n  \n  \n\n\n\n\n\n\n3.2.2 Texas A&M - Alabama 2021\nAnother game chosen completely at random.\n\n\nShow the code\npbp_fit |&gt;\n  augment(\n    prepared_pbp |&gt;\n      filter(game_id == 401282103)\n  ) |&gt;\n  calculate_expected_points() |&gt;\n  calculate_points_added() |&gt;\n  top_plays_by_game(var = predicted_points_added, n =10) |&gt;\n  plays_points_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      period\n      ytg\n      down\n      distance\n      play_text\n      ep_pre\n      ep_post\n      ep_added\n    \n  \n  \n    \n      2021 - 401282103\n    \n    Alabama\nTexas A&M\n1\n56\n3\n1\nBrian Robinson Jr. run for 1 yd to the Alab 45 Brian Robinson Jr. fumbled, recovered by TexAM , return for 4 yds to the Alab 41\n2.240\n-3.582\n-5.821\n    Texas A&M\nAlabama\n3\n81\n4\n4\nNik Constantinou punt blocked by Ja'Corey Brooks blocked by Ja'Corey Brooks for a TD, (Will Reichard KICK)\n-2.385\n—\n-4.615\n    Texas A&M\nAlabama\n4\n25\n1\n10\nZach Calzada pass complete to Ainias Smith for 25 yds for a TD, (Seth Small KICK)\n2.839\n—\n4.161\n    Texas A&M\nAlabama\n2\n74\n1\n10\nZach Calzada pass intercepted DeMarcco Hellams return for no gain to the TexAM 40\n0.764\n-3.396\n-4.160\n    Alabama\nTexas A&M\n2\n1\n3\n1\nBryce Young pass intercepted Demani Richardson return for 3 yds to the TexAM 3\n5.502\n1.451\n-4.051\n    Alabama\nTexas A&M\n3\n29\n2\n7\nBryce Young pass complete to Jameson Williams for 29 yds for a TD, (Will Reichard KICK)\n3.775\n—\n3.225\n    Texas A&M\nAlabama\n2\n77\n2\n12\nZach Calzada pass complete to Devon Achane for 33 yds to the Alab 44 for a 1ST down\n-0.270\n2.836\n3.106\n    Alabama\nTexas A&M\n3\n75\n2\n10\nBrian Robinson Jr. run for 24 yds to the Alab 49 for a 1ST down\n-0.152\n2.844\n2.996\n    Texas A&M\nAlabama\n2\n15\n1\n10\nIsaiah Spiller run for 15 yds for a TD, (Seth Small KICK)\n4.050\n—\n2.950\n    Alabama\nTexas A&M\n3\n51\n3\n9\nBryce Young pass complete to Brian Robinson Jr. for 16 yds to the TexAM 35 for a 1ST down\n0.711\n3.639\n2.927\n  \n  \n  \n\n\n\n\n\n\n3.2.3 Auburn - Georgia 2013\n\n\nShow the code\npbp_fit |&gt;\n  augment(\n    prepared_pbp |&gt;\n      filter(game_id == 333200002)\n  ) |&gt;\n  calculate_expected_points() |&gt;\n  calculate_points_added() |&gt;\n  top_plays_by_game(var = predicted_points_added, n = 10) |&gt;\n  plays_points_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      period\n      ytg\n      down\n      distance\n      play_text\n      ep_pre\n      ep_post\n      ep_added\n    \n  \n  \n    \n      2013 - 333200002\n    \n    Auburn\nGeorgia\n4\n73\n4\n18\nNick Marshall pass complete to Ricardo Louis for 73 yards for a TOUCHDOWN.\n-0.301\n—\n7.301\n    Georgia\nAuburn\n4\n5\n4\n5\nAaron Murray rush for 5 yards for a TOUCHDOWN.\n2.087\n—\n4.913\n    Auburn\nGeorgia\n1\n68\n4\n4\nGEORGIA penalty 15 yard Personal Foul on John Taylor accepted.\n-1.318\n2.854\n4.172\n    Auburn\nGeorgia\n2\n24\n1\n10\nTre Mason rush for 24 yards for a TOUCHDOWN.\n3.357\n—\n3.643\n    Auburn\nGeorgia\n3\n51\n3\n4\nNick Marshall pass complete to Ricardo Louis for 44 yards to the Geo 7 for a 1ST down.\n1.535\n5.092\n3.558\n    Georgia\nAuburn\n4\n24\n1\n10\nAaron Murray pass complete to Arthur Lynch for 24 yards for a TOUCHDOWN.\n3.690\n—\n3.310\n    Georgia\nAuburn\n2\n75\n1\n10\nAaron Murray pass complete to Michael Bennett for 42 yards to the Aub 33 for a 1ST down.\n0.683\n3.973\n3.290\n    Georgia\nAuburn\n3\n83\n1\n10\nAaron Murray pass complete to Rantavious Wooten for 40 yards to the Aub 43 for a 1ST down.\n0.189\n3.467\n3.278\n    Georgia\nAuburn\n3\n16\n2\n10\nAaron Murray rush for 16 yards for a TOUCHDOWN.\n3.930\n—\n3.070\n    Auburn\nGeorgia\n1\n21\n2\n10\nCorey Grant rush for 21 yards for a TOUCHDOWN.\n3.946\n—\n3.054\n  \n  \n  \n\n\n\n\n\n\n3.2.4 Michigan State - Michigan, 2015 (WOAH)\n\n\nShow the code\npbp_fit |&gt;\n  augment(\n    prepared_pbp |&gt;\n      filter(game_id == 400763542)\n  ) |&gt;\n  calculate_expected_points() |&gt;\n  calculate_points_added() |&gt;\n  top_plays_by_game(var = predicted_points_added, n = 10) |&gt;\n  plays_points_tbl()\n\n\n\n\n\n  \n    \n      offense\n      defense\n      period\n      ytg\n      down\n      distance\n      play_text\n      ep_pre\n      ep_post\n      ep_added\n    \n  \n  \n    \n      2015 - 400763542\n    \n    Michigan\nMichigan State\n4\n47\n4\n2\nBlake O'Neill run for a loss of 15 yards Blake O'Neill fumbled, recovered by MchSt Jalen Watts-Jackson  , return for 38 yds\n0.273\n—\n-7.273\n    Michigan State\nMichigan\n4\n75\n1\n10\nConnor Cook pass complete to Trevon Pendleton for 74 yds to the Mich 1 for a 1ST down\n0.776\n6.437\n5.660\n    Michigan\nMichigan State\n1\n82\n4\n19\nBlake O'Neill punt for 80 yds, downed at the MchSt 2\n-3.311\n1.266\n4.577\n    Michigan State\nMichigan\n1\n77\n3\n12\nConnor Cook pass complete to Aaron Burbridge for 27 yds to the 50 yard line for a 1ST down\n-1.769\n2.599\n4.368\n    Michigan\nMichigan State\n3\n64\n3\n9\nJake Rudock pass complete to Amara Darboh for 32 yds to the MchSt 32 for a 1ST down\n-0.094\n4.056\n4.150\n    Michigan\nMichigan State\n4\n69\n3\n11\nJake Rudock pass complete to Amara Darboh for 24 yds to the MchSt 45 for a 1ST down\n-0.611\n3.379\n3.989\n    Michigan State\nMichigan\n3\n30\n2\n8\nConnor Cook pass complete to Macgarrett Kings Jr. for 30 yds for a TD, (Michael Geiger KICK)\n3.583\n—\n3.417\n    Michigan State\nMichigan\n1\n74\n3\n10\nConnor Cook pass complete to Aaron Burbridge for 13 yds to the MchSt 39 for a 1ST down\n-1.177\n2.066\n3.244\n    Michigan State\nMichigan\n1\n51\n3\n18\nMICHIGAN Penalty, Defensive Holding (Jabrill Peppers) to the Mich 41 for a 1ST down\n0.563\n3.607\n3.044\n    Michigan State\nMichigan\n1\n28\n4\n8\nConnor Cook pass incomplete to Aaron Burbridge\n1.615\n-1.254\n-2.869"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "College Football",
    "section": "",
    "text": "I have a number of ongoing projects relating to college football using data from collegefootballdata.com.\nDisclaimer: Despite spending more years at Florida State (and being on campus for the 2013 championship season) while I worked on my PhD, my own college football loyalties lie with my undergraduate university, Texas A&M.\n\n1 Predictions\nPosteason Predictions\nGame Predictions\nTeam Rankings\n\n\n2 Methodology\nExpected Points\nOpponent Adjusted Team Efficiency"
  },
  {
    "objectID": "predicting_games.html",
    "href": "predicting_games.html",
    "title": "Predicting College Football Games",
    "section": "",
    "text": "This page displays predictions for upcoming games in the 2024 college football season. These predictions come from a model built on historical college football play by play and game data in order to simulate upcoming games. All data is from collegefootballdata.com. Any mistakes are my own."
  },
  {
    "objectID": "predicting_games.html#betting-lines",
    "href": "predicting_games.html#betting-lines",
    "title": "Predicting College Football Games",
    "section": "Betting Lines",
    "text": "Betting Lines\nHow do these predictions compare to betting lines? I compare my predicted spread against the spread from ESPN Bet.\n\n\n\n\n\n\n\n\n\nThe following table displays my prediction for each game compared to betting lines from various providers."
  },
  {
    "objectID": "predicting_games.html#against-the-spread",
    "href": "predicting_games.html#against-the-spread",
    "title": "Predicting College Football Games",
    "section": "Against the Spread",
    "text": "Against the Spread\nHow has the model performed against the spread? I compare my model’s predictions against betting lines from various providers.\n\n\n\n\n\n\nA Note on Assessment\n\n\n\n\n\nEarly versions of this report used the opening betting line from providers; I have changed this to base the assessment around the final betting line.\n\n\n\n\n\n\n\n\n  \n    \n      season\n      week\n      Bovada\n      DraftKings\n      ESPN Bet\n    \n  \n  \n    2024\n0\n4-0 (1.000)\n4-0 (1.000)\n4-0 (1.000)\n    2024\n1\n19-20 (0.487)\n18-21 (0.462)\n36-39 (0.480)\n    2024\n2\n23-26 (0.469)\n25-26 (0.490)\n39-39 (0.500)\n    2024\n3\n26-26 (0.500)\n24-28 (0.462)\n30-33 (0.476)\n    2024\n4\n26-28 (0.481)\n34-27 (0.557)\n34-30 (0.531)\n    2024\n5\n24-28 (0.462)\n25-29 (0.463)\n29-26 (0.527)\n    2024\n6\n23-26 (0.469)\n23-25 (0.479)\n22-27 (0.449)\n    2024\n7\n23-29 (0.442)\n23-28 (0.451)\n24-28 (0.462)\n    2024\n8\n26-33 (0.441)\n27-31 (0.466)\n26-33 (0.441)\n    2024\n9\n32-24 (0.571)\n31-25 (0.554)\n30-27 (0.526)\n    2024\n10\n26-22 (0.542)\n27-22 (0.551)\n29-20 (0.592)\n    2024\n11\n27-23 (0.540)\n27-22 (0.551)\n26-24 (0.520)\n    2024\n12\n25-28 (0.472)\n27-27 (0.500)\n28-27 (0.509)\n    2024\n13\n36-26 (0.581)\n37-27 (0.578)\n36-29 (0.554)\n    2024\n14\n38-29 (0.567)\n33-33 (0.500)\n39-28 (0.582)\n    2024\n15\n3-6 (0.333)\n4-5 (0.444)\n4-5 (0.444)\n    2024\n16\n1-0 (1.000)\n1-0 (1.000)\n1-0 (1.000)\n    2024\n17\n1-0 (1.000)\n0-1 (0.000)\n1-0 (1.000)\n    2024\n18\n8-4 (0.667)\n7-5 (0.583)\n8-4 (0.667)\n    2024\n19\n13-9 (0.591)\n12-9 (0.571)\n11-11 (0.500)\n    2024\n20\n5-3 (0.625)\n5-3 (0.625)\n6-2 (0.750)\n    2024\noverall\n409-390 (0.512)\n414-394 (0.512)\n463-432 (0.517)\n  \n  \n  \n\n\n\n\nThe following table displays my model’s prediction in previous weeks against betting lines."
  },
  {
    "objectID": "season_report.html",
    "href": "season_report.html",
    "title": "CFB Team Efficiency and Rankings",
    "section": "",
    "text": "The following table displays my current rankings going into Week 21 based on opponent adjusted estimates of team efficiency to date.\n\n\n\n\n\n\nAbout the Table\n\n\n\n\n\nTeam Score refers to the team’s expected margin of victory against an average FBS team, as estimated by my game prediction model and measures of team efficiency.\n∆ Score indicates the change in a team’s score from the previous week. Positive values indicate my model rated the team higher after the previous week’s performance; negative values indicate my model rates the team lower.\nOffensive/Defensive Efficiency refers to the team’s expected points added per play on offense and defense, adjusted for opponent strength.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHow has the top 25 changed over the course of the season?\n\n\n\n\n\n\n\n\n\n\n\n\nHow have team scores changed during the season? The following plots display estimated team scores for each week of the season by conference. Click on a conference to view how team scores have changed during the season.\n\nSECBig TenBig 12ACCMountain WestAmerican AthleticConference USASun BeltMAC"
  },
  {
    "objectID": "season_report.html#top-25-by-week",
    "href": "season_report.html#top-25-by-week",
    "title": "CFB Team Efficiency and Rankings",
    "section": "",
    "text": "How has the top 25 changed over the course of the season?"
  },
  {
    "objectID": "season_report.html#team-scores",
    "href": "season_report.html#team-scores",
    "title": "CFB Team Efficiency and Rankings",
    "section": "",
    "text": "How have team scores changed during the season? The following plots display estimated team scores for each week of the season by conference. Click on a conference to view how team scores have changed during the season.\n\nSECBig TenBig 12ACCMountain WestAmerican AthleticConference USASun BeltMAC"
  },
  {
    "objectID": "season_report.html#offensedefense",
    "href": "season_report.html#offensedefense",
    "title": "CFB Team Efficiency and Rankings",
    "section": "Offense/Defense",
    "text": "Offense/Defense\nThe following plot displays all FBS teams based on their estimated offensive/defensive efficiency for the current season to date."
  },
  {
    "objectID": "season_report.html#passrush",
    "href": "season_report.html#passrush",
    "title": "CFB Team Efficiency and Rankings",
    "section": "Pass/Rush",
    "text": "Pass/Rush\nI also measure each team’s efficiency based on the play type, estimating (opponent adjusted) offensive/defensive efficiency when running and passing.\nThe following table displays all FBS teams based on their estimated efficiency for passing/rushing on both sides of the ball."
  }
]